{"version":3,"sources":["../node_modules/async/internal/wrapAsync.js","../node_modules/bnc-onboard/dist/esm/providerEngine-144da692.js","../node_modules/async/internal/slice.js","../node_modules/async/internal/once.js","../node_modules/async/internal/onlyOnce.js","../node_modules/async/eachOf.js","../node_modules/async/internal/breakLoop.js","../node_modules/async/internal/eachOfLimit.js","../node_modules/async/internal/doLimit.js","../node_modules/web3-provider-engine/util/create-payload.js","../node_modules/xhr/index.js","../node_modules/global/window.js","../node_modules/is-function/index.js","../node_modules/parse-headers/parse-headers.js","../node_modules/async/map.js","../node_modules/async/internal/doParallel.js","../node_modules/async/eachOfLimit.js","../node_modules/async/internal/iterator.js","../node_modules/async/internal/getIterator.js","../node_modules/async/asyncify.js","../node_modules/async/internal/initialParams.js","../node_modules/async/internal/setImmediate.js","../node_modules/async/internal/map.js","../node_modules/async/eachSeries.js","../node_modules/async/eachLimit.js","../node_modules/async/internal/withoutIndex.js","../node_modules/web3-provider-engine/subproviders/subprovider.js","../node_modules/web3-provider-engine/node_modules/eth-json-rpc-errors/src/classes.js","../node_modules/async/waterfall.js","../node_modules/async/parallel.js","../node_modules/async/internal/parallel.js","../node_modules/web3-provider-engine/node_modules/eth-json-rpc-errors/src/utils.js","../node_modules/web3-provider-engine/subproviders/json-rpc-engine-middleware.js","../node_modules/web3-provider-engine/index.js","../node_modules/web3-provider-engine/util/stoplight.js","../node_modules/web3-provider-engine/util/rpc-cache-utils.js","../node_modules/web3-provider-engine/util/random-id.js","../node_modules/web3-provider-engine/subproviders/rpc.js","../node_modules/web3-provider-engine/node_modules/eth-json-rpc-errors/index.js","../node_modules/web3-provider-engine/node_modules/eth-json-rpc-errors/src/errors.js","../node_modules/web3-provider-engine/subproviders/hooked-wallet.js","../node_modules/web3-provider-engine/util/estimate-gas.js","../node_modules/web3-provider-engine/subproviders/subscriptions.js","../node_modules/web3-provider-engine/subproviders/filters.js"],"names":["Object","defineProperty","exports","value","isAsync","undefined","obj","_asyncify","require","_asyncify2","__esModule","default","supportsSymbol","Symbol","fn","toStringTag","asyncFn","createProvider","config","getAccounts","signTransaction","rpcUrl","processMessage","processPersonalMessage","signMessage","signPersonalMessage","pollingInterval","get_store_value","app","blockPollingInterval","idMgmt","HookedWalletSubprovider","rpcSubProvider","RpcSource","includes","concat","provider","Web3ProviderEngine","addProvider","SubscriptionSubprovider","FilterSubprovider","start","on","console","error","arrayLike","newLen","Math","max","length","newArr","Array","idx","module","callFn","apply","this","arguments","Error","coll","iteratee","callback","_isArrayLike2","eachOfArrayLike","eachOfGeneric","_wrapAsync2","_interopRequireDefault","_breakLoop2","_eachOfLimit2","_doLimit2","_noop2","_once2","_onlyOnce2","index","completed","iteratorCallback","err","Infinity","limit","nextElem","_iterator2","done","running","looping","iterateeCallback","replenish","elem","key","iterable","getRandomId","extend","data","id","jsonrpc","params","window","isFunction","parseHeaders","xtend","initParams","uri","options","createXHR","_createXHR","called","response","body","getBody","xhr","responseText","responseType","responseXML","firefoxBugTakenEffect","documentElement","nodeName","e","getXml","isJson","JSON","parse","errorFunc","evt","clearTimeout","timeoutTimer","statusCode","failureResponse","loadFunc","aborted","status","useXDR","method","headers","url","rawRequest","getAllResponseHeaders","cors","XDomainRequest","XMLHttpRequest","sync","json","stringify","onreadystatechange","readyState","setTimeout","onload","onerror","onprogress","onabort","ontimeout","open","username","password","withCredentials","timeout","abort","code","setRequestHeader","hasOwnProperty","i","isEmpty","beforeSend","send","array","iterator","forEachArray","toUpperCase","win","global","self","string","toString","call","alert","confirm","prompt","prototype","trim","replace","arg","result","headersArr","split","row","indexOf","slice","toLowerCase","push","_doParallel2","_map2","_eachOf2","_eachOfLimit3","len","createArrayIterator","_getIterator2","item","next","createES2015Iterator","okeys","_keys2","createObjectIterator","iteratorSymbol","func","_initialParams2","args","_isObject2","then","invokeCallback","message","_setImmediate2","rethrow","_slice2","pop","_slice","hasNextTick","hasSetImmediate","fallback","wrap","_defer","setImmediate","process","nextTick","defer","eachfn","arr","results","counter","_iteratee","_","v","_eachLimit2","_withoutIndex2","createPayload","SubProvider","setEngine","engine","block","currentBlock","stop","handleRequest","payload","end","emitPayload","cb","sendAsync","safeStringify","EthereumRpcError","Number","isInteger","serialized","stack","serialize","stringifyReplacer","EthereumProviderError","isValidEthProviderCode","tasks","_isArray2","taskIndex","nextTask","task","_parallel2","errorValues","FALLBACK_ERROR_CODE","rpc","internal","JSON_RPC_SERVER_ERROR_MESSAGE","FALLBACK_MESSAGE","FALLBACK_ERROR","getMessageFromCode","fallbackMessage","codeString","isJsonRpcServerError","isValidCode","assignOriginalError","isArray","assign","serializeError","fallbackError","originalError","JsonRpcEngineMiddlewareSubprovider","constructorFn","_constructorFn","middleware","blockTracker","_blockTracker","req","provEngNext","provEngEnd","res","handler","EventEmitter","inherits","ethUtil","EthBlockTracker","map","eachSeries","Stoplight","opts","setMaxListeners","directProvider","_handleAsync","bind","blockTrackerProvider","setSkipCacheFlag","_ready","_providers","toBufferBlock","jsonBlock","number","toBuffer","hash","parentHash","nonce","mixHash","sha3Uncles","logsBloom","transactionsRoot","stateRoot","receiptsRoot","receiptRoot","miner","difficulty","totalDifficulty","size","extraData","gasLimit","gasUsed","timestamp","transactions","go","blockNumber","_getBlockByNumberWithRetry","emit","log","bufferBlock","_setCurrentBlock","_running","removeAllListeners","isRunning","source","splice","removeProvider","await","retriesRemaining","attemptRequest","_getBlockByNumber","afterRequest","skipCache","finished","currentProvider","_error","_result","resultObj","after","unshift","isLocked","once","canCache","cacheTypeForPayload","paramsWithoutBlockTag","blockTagParamIndex","cacheIdentifierForPayload","includeBlockRef","blockTagForPayload","floor","MAX_SAFE_INTEGER","random","browser","Subprovider","ethErrors","targetUrl","sanitizedPayload","sanitizePayload","newPayload","rejectUnauthorized","methodNotFound","msg","ERROR_CODES","getEthJsonRpcError","validateOpts","getEthProviderError","invalidRequest","invalidParams","server","invalidInput","resourceNotFound","resourceUnavailable","transactionRejected","methodNotSupported","userRejectedRequest","unauthorized","unsupportedMethod","custom","waterfall","parallel","sigUtil","Semaphore","estimateGas","hexRegex","nonceLock","processTransaction","processTypedMessage","approveTransaction","autoApprove","approveMessage","approvePersonalMessage","approveDecryptMessage","approveEncryptionPublicKey","approveTypedMessage","mustProvideInConstructor","decryptMessage","encryptionPublicKey","signTypedMessage","recoverPersonalSignature","publishTransaction","getGasPrice","resemblesAddress","fixed","addHexPrefix","isValidAddress","resemblesData","isValidHex","match","methodName","txParams","msgParams","extraParams","address","_parityRequests","_parityRequestCount","accounts","validateTransaction","processSignTransaction","from","validateMessage","first","warn","warning","validatePersonalMessage","validateDecryptMessage","processDecryptMessage","validateEncryptionPublicKey","processEncryptionPublicKey","signature","sig","second","validateTypedMessage","parityPostTransaction","parityPostSign","requestId","parityCheckRequest","account","didApprove","checkApproval","finalizeAndSubmitTx","finalizeTx","type","count","reqId","txHash","senderHex","validateSender","senderIsValid","senderAddress","take","fillInTxExtras","leave","signedTx","raw","tx","rawTx","gasPrice","gas","to","cloneTxParams","taskResults","ProviderSubprovider","createSubscriptionManager","SubscriptionsSubprovider","events","createFilterMiddleware"],"mappings":"uGAEAA,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAEXD,EAAQE,aAAUC,EAElB,IAIgCC,EAJ5BC,EAAYC,EAAQ,MAEpBC,GAE4BH,EAFQC,IAEaD,EAAII,WAAaJ,EAAM,CAAEK,QAASL,GAEvF,IAAIM,EAAmC,oBAAXC,OAE5B,SAAST,EAAQU,GACb,OAAOF,GAA6C,kBAA3BE,EAAGD,OAAOE,aAOvCb,EAAQS,QAJR,SAAmBK,GACf,OAAOZ,EAAQY,IAAW,EAAIP,EAAWE,SAASK,GAAWA,GAIjEd,EAAQE,QAAUA,G,kCCxBlB,iJA2Cea,UAhCf,SAAwBC,GACtB,IAAIC,EAAcD,EAAOC,YACrBC,EAAkBF,EAAOE,gBACzBC,EAASH,EAAOG,OAChBC,EAAiBJ,EAAOI,eACxBC,EAAyBL,EAAOK,uBAChCC,EAAcN,EAAOM,YACrBC,EAAsBP,EAAOO,oBAC7BC,EAAkBC,YAAgBC,KAAKC,qBACvCC,EAASX,GAAe,IAAIY,IAAwB,CACtDZ,YAAaA,EACbC,gBAAiBA,EACjBE,eAAgBA,EAChBC,uBAAwBA,EACxBC,YAAaA,EACbC,oBAAqBA,IAEnBO,EAAiB,IAAIC,IAAU,CACjCZ,OAAQA,EAAOa,SAAS,QAAUb,EAAS,WAAWc,OAAOd,KAE3De,EAAW,IAAIC,IAAmB,CACpCX,gBAAiBA,IAQnB,OANAU,EAASE,YAAY,IAAIC,KACzBH,EAASE,YAAY,IAAIE,KACzBV,GAAUM,EAASE,YAAYR,GAC/BM,EAASE,YAAYN,GACrBI,EAASK,QACTL,EAASM,GAAG,QAASC,QAAQC,OACtBR,I,kCCtCTpC,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAEXD,EAAQS,QACR,SAAekC,EAAWJ,GACtBA,GAAgB,EAGhB,IAFA,IAAIK,EAASC,KAAKC,IAAIH,EAAUI,OAASR,EAAO,GAC5CS,EAASC,MAAML,GACVM,EAAM,EAAGA,EAAMN,EAAQM,IAC5BF,EAAOE,GAAOP,EAAUJ,EAAQW,GAEpC,OAAOF,GAEXG,EAAOnD,QAAUA,EAAO,S,kCCbxBF,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAEXD,EAAQS,QACR,SAAcG,GACV,OAAO,WACH,GAAW,OAAPA,EAAJ,CACA,IAAIwC,EAASxC,EACbA,EAAK,KACLwC,EAAOC,MAAMC,KAAMC,cAG3BJ,EAAOnD,QAAUA,EAAO,S,kCCZxBF,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAEXD,EAAQS,QACR,SAAkBG,GACd,OAAO,WACH,GAAW,OAAPA,EAAa,MAAM,IAAI4C,MAAM,gCACjC,IAAIJ,EAASxC,EACbA,EAAK,KACLwC,EAAOC,MAAMC,KAAMC,aAG3BJ,EAAOnD,QAAUA,EAAO,S,kCCZxBF,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAGXD,EAAQS,QAAU,SAAUgD,EAAMC,EAAUC,KACb,EAAIC,EAAcnD,SAASgD,GAAQI,EAAkBC,GAC3DL,GAAM,EAAIM,EAAYtD,SAASiD,GAAWC,IAGnE,IAEIC,EAAgBI,EAFD1D,EAAQ,OAMvB2D,EAAcD,EAFD1D,EAAQ,OAMrB4D,EAAgBF,EAFD1D,EAAQ,OAMvB6D,EAAYH,EAFD1D,EAAQ,OAMnB8D,EAASJ,EAFD1D,EAAQ,OAMhB+D,EAASL,EAFD1D,EAAQ,OAMhBgE,EAAaN,EAFD1D,EAAQ,OAMpByD,EAAcC,EAFD1D,EAAQ,OAIzB,SAAS0D,EAAuB5D,GAAO,OAAOA,GAAOA,EAAII,WAAaJ,EAAM,CAAEK,QAASL,GAGvF,SAASyD,EAAgBJ,EAAMC,EAAUC,GACrCA,GAAW,EAAIU,EAAO5D,SAASkD,GAAYS,EAAO3D,SAClD,IAAI8D,EAAQ,EACRC,EAAY,EACZzB,EAASU,EAAKV,OAKlB,SAAS0B,EAAiBC,EAAKzE,GACvByE,EACAf,EAASe,KACAF,IAAczB,GAAU9C,IAAUgE,EAAYxD,SACvDkD,EAAS,MAIjB,IAZe,IAAXZ,GACAY,EAAS,MAWNY,EAAQxB,EAAQwB,IACnBb,EAASD,EAAKc,GAAQA,GAAO,EAAID,EAAW7D,SAASgE,IAK7D,IAAIX,GAAgB,EAAIK,EAAU1D,SAASyD,EAAczD,QAASkE,KAyClExB,EAAOnD,QAAUA,EAAO,S,kCC5GxBF,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAITD,EAAQS,QAAU,GAClB0C,EAAOnD,QAAUA,EAAO,S,kCCNxBF,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAEXD,EAAQS,QAwBR,SAAsBmE,GAClB,OAAO,SAAUxE,EAAKsD,EAAUC,GAE5B,GADAA,GAAW,EAAIU,EAAO5D,SAASkD,GAAYS,EAAO3D,SAC9CmE,GAAS,IAAMxE,EACf,OAAOuD,EAAS,MAEpB,IAAIkB,GAAW,EAAIC,EAAWrE,SAASL,GACnC2E,GAAO,EACPC,EAAU,EACVC,GAAU,EAEd,SAASC,EAAiBR,EAAKzE,GAE3B,GADA+E,GAAW,EACPN,EACAK,GAAO,EACPpB,EAASe,OACN,IAAIzE,IAAUgE,EAAYxD,SAAWsE,GAAQC,GAAW,EAE3D,OADAD,GAAO,EACApB,EAAS,MACRsB,GACRE,KAIR,SAASA,IAEL,IADAF,GAAU,EACHD,EAAUJ,IAAUG,GAAM,CAC7B,IAAIK,EAAOP,IACX,GAAa,OAATO,EAKA,OAJAL,GAAO,OACHC,GAAW,GACXrB,EAAS,OAIjBqB,GAAW,EACXtB,EAAS0B,EAAKnF,MAAOmF,EAAKC,KAAK,EAAIf,EAAW7D,SAASyE,IAE3DD,GAAU,EAGdE,MA/DR,IAEIf,EAASJ,EAFD1D,EAAQ,OAMhB+D,EAASL,EAFD1D,EAAQ,OAMhBwE,EAAad,EAFD1D,EAAQ,OAMpBgE,EAAaN,EAFD1D,EAAQ,OAMpB2D,EAAcD,EAFD1D,EAAQ,OAIzB,SAAS0D,EAAuB5D,GAAO,OAAOA,GAAOA,EAAII,WAAaJ,EAAM,CAAEK,QAASL,GA8CvF+C,EAAOnD,QAAUA,EAAO,S,kCCvExBF,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAEXD,EAAQS,QACR,SAAiBG,EAAIgE,GACjB,OAAO,SAAUU,EAAU5B,EAAUC,GACjC,OAAO/C,EAAG0E,EAAUV,EAAOlB,EAAUC,KAG7CR,EAAOnD,QAAUA,EAAO,S,qBCXxB,IAAMuF,EAAcjF,EAAQ,MACtBkF,EAASlF,EAAQ,MAEvB6C,EAAOnD,QAGP,SAAuByF,GACrB,OAAOD,EAAO,CAEZE,GAAIH,IACJI,QAAS,MACTC,OAAQ,IAEPH,K,kCCZL,IAAII,EAASvF,EAAQ,MACjBwF,EAAaxF,EAAQ,MACrByF,EAAezF,EAAQ,MACvB0F,EAAQ1F,EAAQ,MA6BpB,SAAS2F,EAAWC,EAAKC,EAASxC,GAC9B,IAAIiC,EAASM,EAYb,OAVIJ,EAAWK,IACXxC,EAAWwC,EACQ,kBAARD,IACPN,EAAS,CAACM,IAAIA,KAGlBN,EAASI,EAAMG,EAAS,CAACD,IAAKA,IAGlCN,EAAOjC,SAAWA,EACXiC,EAGX,SAASQ,EAAUF,EAAKC,EAASxC,GAE7B,OAAO0C,EADPF,EAAUF,EAAWC,EAAKC,EAASxC,IAIvC,SAAS0C,EAAWF,GAChB,GAA+B,qBAArBA,EAAQxC,SACd,MAAM,IAAIH,MAAM,6BAGpB,IAAI8C,GAAS,EACT3C,EAAW,SAAgBe,EAAK6B,EAAUC,GACtCF,IACAA,GAAS,EACTH,EAAQxC,SAASe,EAAK6B,EAAUC,KAUxC,SAASC,IAEL,IAAID,OAAOrG,EAQX,GALIqG,EADAE,EAAIH,SACGG,EAAIH,SAEJG,EAAIC,cAsJvB,SAAgBD,GAGZ,IACI,GAAyB,aAArBA,EAAIE,aACJ,OAAOF,EAAIG,YAEf,IAAIC,EAAwBJ,EAAIG,aAA4D,gBAA7CH,EAAIG,YAAYE,gBAAgBC,SAC/E,GAAyB,KAArBN,EAAIE,eAAwBE,EAC5B,OAAOJ,EAAIG,YAEjB,MAAOI,IAET,OAAO,KAnK4BC,CAAOR,GAGlCS,EACA,IACIX,EAAOY,KAAKC,MAAMb,GACpB,MAAOS,IAGb,OAAOT,EAGX,SAASc,EAAUC,GAMf,OALAC,aAAaC,GACRF,aAAe/D,QAChB+D,EAAM,IAAI/D,MAAM,IAAM+D,GAAO,kCAEjCA,EAAIG,WAAa,EACV/D,EAAS4D,EAAKI,GAIzB,SAASC,IACL,IAAIC,EAAJ,CACA,IAAIC,EACJN,aAAaC,GAGTK,EAFD3B,EAAQ4B,aAAuB5H,IAAbuG,EAAIoB,OAEZ,IAEgB,OAAfpB,EAAIoB,OAAkB,IAAMpB,EAAIoB,OAE9C,IAAIvB,EAAWoB,EACXjD,EAAM,KAiBV,OAfe,IAAXoD,GACAvB,EAAW,CACPC,KAAMC,IACNiB,WAAYI,EACZE,OAAQA,EACRC,QAAS,GACTC,IAAKhC,EACLiC,WAAYzB,GAEbA,EAAI0B,wBACH7B,EAAS0B,QAAUlC,EAAaW,EAAI0B,2BAGxC1D,EAAM,IAAIlB,MAAM,iCAEbG,EAASe,EAAK6B,EAAUA,EAASC,OAG5C,IAUInB,EACAwC,EAXAnB,EAAMP,EAAQO,KAAO,KAEpBA,IAEGA,EADAP,EAAQkC,MAAQlC,EAAQ4B,OAClB,IAAI3B,EAAUkC,eAEd,IAAIlC,EAAUmC,gBAM5B,IAMId,EANAvB,EAAMQ,EAAIwB,IAAM/B,EAAQD,KAAOC,EAAQ+B,IACvCF,EAAStB,EAAIsB,OAAS7B,EAAQ6B,QAAU,MACxCxB,EAAOL,EAAQK,MAAQL,EAAQV,KAC/BwC,EAAUvB,EAAIuB,QAAU9B,EAAQ8B,SAAW,GAC3CO,IAASrC,EAAQqC,KACjBrB,GAAS,EAETQ,EAAkB,CAClBnB,UAAMrG,EACN8H,QAAS,GACTP,WAAY,EACZM,OAAQA,EACRE,IAAKhC,EACLiC,WAAYzB,GA0ChB,GAvCI,SAAUP,IAA4B,IAAjBA,EAAQsC,OAC7BtB,GAAS,EACTc,EAAO,QAAcA,EAAO,SAAeA,EAAO,OAAa,oBAChD,QAAXD,GAA+B,SAAXA,IACpBC,EAAQ,iBAAmBA,EAAQ,kBAAoBA,EAAQ,gBAAkB,oBACjFzB,EAAOY,KAAKsB,WAA2B,IAAjBvC,EAAQsC,KAAgBjC,EAAOL,EAAQsC,QAIrE/B,EAAIiC,mBAvGJ,WAC2B,IAAnBjC,EAAIkC,YACJC,WAAWjB,EAAU,IAsG7BlB,EAAIoC,OAASlB,EACblB,EAAIqC,QAAUzB,EAEdZ,EAAIsC,WAAa,aAGjBtC,EAAIuC,QAAU,WACVpB,GAAU,GAEdnB,EAAIwC,UAAY5B,EAChBZ,EAAIyC,KAAKnB,EAAQ9B,GAAMsC,EAAMrC,EAAQiD,SAAUjD,EAAQkD,UAEnDb,IACA9B,EAAI4C,kBAAoBnD,EAAQmD,kBAK/Bd,GAAQrC,EAAQoD,QAAU,IAC3B9B,EAAeoB,YAAW,WACtB,IAAIhB,EAAJ,CACAA,GAAU,EACVnB,EAAI8C,MAAM,WACV,IAAIvC,EAAI,IAAIzD,MAAM,0BAClByD,EAAEwC,KAAO,YACTnC,EAAUL,MACXd,EAAQoD,UAGX7C,EAAIgD,iBACJ,IAAIrE,KAAO4C,EACJA,EAAQ0B,eAAetE,IACtBqB,EAAIgD,iBAAiBrE,EAAK4C,EAAQ5C,SAGvC,GAAIc,EAAQ8B,UApLvB,SAAiB7H,GACb,IAAI,IAAIwJ,KAAKxJ,EACT,GAAGA,EAAIuJ,eAAeC,GAAI,OAAO,EAErC,OAAO,EAgLwBC,CAAQ1D,EAAQ8B,SAC3C,MAAM,IAAIzE,MAAM,qDAkBpB,MAfI,iBAAkB2C,IAClBO,EAAIE,aAAeT,EAAQS,cAG3B,eAAgBT,GACc,oBAAvBA,EAAQ2D,YAEf3D,EAAQ2D,WAAWpD,GAMvBA,EAAIqD,KAAKvD,GAAQ,MAEVE,EA3NXvD,EAAOnD,QAAUoG,EAEjBjD,EAAOnD,QAAQS,QAAU2F,EACzBA,EAAUmC,eAAiB1C,EAAO0C,gBA6OlC,aA5OAnC,EAAUkC,eAAiB,oBAAsB,IAAIlC,EAAUmC,eAAoBnC,EAAUmC,eAAiB1C,EAAOyC,eAUrH,SAAsB0B,EAAOC,GACzB,IAAK,IAAIL,EAAI,EAAGA,EAAII,EAAMjH,OAAQ6G,IAC9BK,EAASD,EAAMJ,IAVvBM,CAAa,CAAC,MAAO,MAAO,OAAQ,QAAS,OAAQ,WAAW,SAASlC,GACrE5B,EAAqB,WAAX4B,EAAsB,MAAQA,GAAU,SAAS9B,EAAKC,EAASxC,GAGrE,OAFAwC,EAAUF,EAAWC,EAAKC,EAASxC,IAC3BqE,OAASA,EAAOmC,cACjB9D,EAAWF,Q,sBChB1B,gBAAIiE,EAGAA,EADkB,qBAAXvE,OACDA,OACmB,qBAAXwE,EACRA,EACiB,qBAATC,KACRA,KAEA,GAGVnH,EAAOnD,QAAUoK,I,qCCZjBjH,EAAOnD,QAIP,SAAqBY,GACnB,IAAKA,EACH,OAAO,EAET,IAAI2J,EAASC,EAASC,KAAK7J,GAC3B,MAAkB,sBAAX2J,GACU,oBAAP3J,GAAgC,oBAAX2J,GACV,qBAAX1E,SAENjF,IAAOiF,OAAOgD,YACdjI,IAAOiF,OAAO6E,OACd9J,IAAOiF,OAAO8E,SACd/J,IAAOiF,OAAO+E,SAdpB,IAAIJ,EAAW1K,OAAO+K,UAAUL,U,mBCFhC,IAAIM,EAAO,SAASP,GAClB,OAAOA,EAAOQ,QAAQ,aAAc,KAMtC5H,EAAOnD,QAAU,SAAUiI,GACzB,IAAKA,EACH,MAAO,GAMT,IAJA,IARqB+C,EAQjBC,EAAS,GAETC,EAAaJ,EAAK7C,GAASkD,MAAM,MAE5BvB,EAAI,EAAGA,EAAIsB,EAAWnI,OAAQ6G,IAAK,CAC1C,IAAIwB,EAAMF,EAAWtB,GACjBrF,EAAQ6G,EAAIC,QAAQ,KACtBhG,EAAMyF,EAAKM,EAAIE,MAAM,EAAG/G,IAAQgH,cAChCtL,EAAQ6K,EAAKM,EAAIE,MAAM/G,EAAQ,IAEL,qBAAjB0G,EAAO5F,GAChB4F,EAAO5F,GAAOpF,GAnBG+K,EAoBAC,EAAO5F,GAnBuB,mBAAxCvF,OAAO+K,UAAUL,SAASC,KAAKO,GAoBtCC,EAAO5F,GAAKmG,KAAKvL,GAEjBgL,EAAO5F,GAAO,CAAE4F,EAAO5F,GAAMpF,IAIjC,OAAOgL,I,kCC5BTnL,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAEIwL,EAAezH,EAFD1D,EAAQ,OAMtBoL,EAAQ1H,EAFD1D,EAAQ,OAInB,SAAS0D,EAAuB5D,GAAO,OAAOA,GAAOA,EAAII,WAAaJ,EAAM,CAAEK,QAASL,GAsCvFJ,EAAQS,SAAU,EAAIgL,EAAahL,SAASiL,EAAMjL,SAClD0C,EAAOnD,QAAUA,EAAO,S,kCCnDxBF,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAEXD,EAAQS,QAYR,SAAoBG,GAChB,OAAO,SAAUR,EAAKsD,EAAUC,GAC5B,OAAO/C,EAAG+K,EAASlL,QAASL,GAAK,EAAI2D,EAAYtD,SAASiD,GAAWC,KAZ7E,IAEIgI,EAAW3H,EAFD1D,EAAQ,OAMlByD,EAAcC,EAFD1D,EAAQ,OAIzB,SAAS0D,EAAuB5D,GAAO,OAAOA,GAAOA,EAAII,WAAaJ,EAAM,CAAEK,QAASL,GAOvF+C,EAAOnD,QAAUA,EAAO,S,kCCpBxBF,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQS,QAgCR,SAAqBgD,EAAMmB,EAAOlB,EAAUC,IAC1C,EAAIiI,EAAcnL,SAASmE,EAA3B,CAAkCnB,GAAM,EAAIM,EAAYtD,SAASiD,GAAWC,IA/B9E,IAEIiI,EAAgB5H,EAFA1D,EAAQ,OAMxByD,EAAcC,EAFD1D,EAAQ,OAIzB,SAAS0D,EAAuB5D,GAAO,OAAOA,GAAOA,EAAII,WAAaJ,EAAM,CAAEK,QAASL,GAyBvF+C,EAAOnD,QAAUA,EAAO,S,kCCtCxBF,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAEXD,EAAQS,QA4CR,SAAkBgD,GACd,IAAI,EAAIG,EAAcnD,SAASgD,GAC3B,OA9BR,SAA6BA,GACzB,IAAImG,GAAK,EACLiC,EAAMpI,EAAKV,OACf,OAAO,WACH,QAAS6G,EAAIiC,EAAM,CAAE5L,MAAOwD,EAAKmG,GAAIvE,IAAKuE,GAAM,MA0BzCkC,CAAoBrI,GAG/B,IAAIwG,GAAW,EAAI8B,EAActL,SAASgD,GAC1C,OAAOwG,EA1BX,SAA8BA,GAC1B,IAAIL,GAAK,EACT,OAAO,WACH,IAAIoC,EAAO/B,EAASgC,OACpB,OAAID,EAAKjH,KAAa,MACtB6E,IACO,CAAE3J,MAAO+L,EAAK/L,MAAOoF,IAAKuE,KAoBnBsC,CAAqBjC,GAhB3C,SAA8B7J,GAC1B,IAAI+L,GAAQ,EAAIC,EAAO3L,SAASL,GAC5BwJ,GAAK,EACLiC,EAAMM,EAAMpJ,OAChB,OAAO,WACH,IAAIsC,EAAM8G,IAAQvC,GAClB,OAAOA,EAAIiC,EAAM,CAAE5L,MAAOG,EAAIiF,GAAMA,IAAKA,GAAQ,MAUFgH,CAAqB5I,IAhD5E,IAEIG,EAAgBI,EAFD1D,EAAQ,OAMvByL,EAAgB/H,EAFD1D,EAAQ,OAMvB8L,EAASpI,EAFD1D,EAAQ,OAIpB,SAAS0D,EAAuB5D,GAAO,OAAOA,GAAOA,EAAII,WAAaJ,EAAM,CAAEK,QAASL,GAsCvF+C,EAAOnD,QAAUA,EAAO,S,kCCvDxBF,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAGXD,EAAQS,QAAU,SAAUgD,GACxB,OAAO6I,GAAkB7I,EAAK6I,IAAmB7I,EAAK6I,MAG1D,IAAIA,EAAmC,oBAAX3L,QAAyBA,OAAOsJ,SAE5D9G,EAAOnD,QAAUA,EAAO,S,kCCVxBF,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAEXD,EAAQS,QAwER,SAAkB8L,GACd,OAAO,EAAIC,EAAgB/L,UAAS,SAAUgM,EAAM9I,GAChD,IAAIsH,EACJ,IACIA,EAASsB,EAAKlJ,MAAMC,KAAMmJ,GAC5B,MAAOxF,GACL,OAAOtD,EAASsD,IAGhB,EAAIyF,EAAWjM,SAASwK,IAAkC,oBAAhBA,EAAO0B,KACjD1B,EAAO0B,MAAK,SAAU1M,GAClB2M,EAAejJ,EAAU,KAAM1D,MAChC,SAAUyE,GACTkI,EAAejJ,EAAUe,EAAImI,QAAUnI,EAAM,IAAIlB,MAAMkB,OAG3Df,EAAS,KAAMsH,OAtF3B,IAEIyB,EAAa1I,EAFD1D,EAAQ,OAMpBkM,EAAkBxI,EAFD1D,EAAQ,OAMzBwM,EAAiB9I,EAFD1D,EAAQ,OAI5B,SAAS0D,EAAuB5D,GAAO,OAAOA,GAAOA,EAAII,WAAaJ,EAAM,CAAEK,QAASL,GA+EvF,SAASwM,EAAejJ,EAAUjB,EAAOzC,GACrC,IACI0D,EAASjB,EAAOzC,GAClB,MAAOgH,IACL,EAAI6F,EAAerM,SAASsM,EAAS9F,IAI7C,SAAS8F,EAAQrK,GACb,MAAMA,EAEVS,EAAOnD,QAAUA,EAAO,S,kCC3GxBF,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAGXD,EAAQS,QAAU,SAAUG,GACxB,OAAO,WACH,IAAI6L,GAAO,EAAIO,EAAQvM,SAAS8C,WAC5BI,EAAW8I,EAAKQ,MACpBrM,EAAG6J,KAAKnH,KAAMmJ,EAAM9I,KAI5B,IAIgCvD,EAJ5B8M,EAAS5M,EAAQ,MAEjB0M,GAE4B5M,EAFK8M,IAEgB9M,EAAII,WAAaJ,EAAM,CAAEK,QAASL,GAEvF+C,EAAOnD,QAAUA,EAAO,S,mCCpBxB,cAEAF,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAEXD,EAAQmN,YAAcnN,EAAQoN,qBAAkBjN,EAChDH,EAAQqN,SAAWA,EACnBrN,EAAQsN,KAAOA,EAEf,IAIgClN,EAJ5B8M,EAAS5M,EAAQ,MAEjB0M,GAE4B5M,EAFK8M,IAEgB9M,EAAII,WAAaJ,EAAM,CAAEK,QAASL,GAEvF,IAgBImN,EAhBAH,EAAkBpN,EAAQoN,gBAA0C,oBAAjBI,GAA+BA,EAClFL,EAAcnN,EAAQmN,YAAiC,kBAAZM,GAAoD,oBAArBA,EAAQC,SAEtF,SAASL,EAASzM,GACdiI,WAAWjI,EAAI,GAGnB,SAAS0M,EAAKK,GACV,OAAO,SAAU/M,GACb,IAAI6L,GAAO,EAAIO,EAAQvM,SAAS8C,UAAW,GAC3CoK,GAAM,WACF/M,EAAGyC,MAAM,KAAMoJ,OAQvBc,EADAH,EACSI,EACFL,EACEM,EAAQC,SAERL,EAGbrN,EAAQS,QAAU6M,EAAKC,K,wECvCvBzN,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAEXD,EAAQS,QAYR,SAAmBmN,EAAQC,EAAKnK,EAAUC,GACtCA,EAAWA,GAAYS,EAAO3D,QAC9BoN,EAAMA,GAAO,GACb,IAAIC,EAAU,GACVC,EAAU,EACVC,GAAY,EAAIjK,EAAYtD,SAASiD,GAEzCkK,EAAOC,GAAK,SAAU5N,EAAOgO,EAAGtK,GAC5B,IAAIY,EAAQwJ,IACZC,EAAU/N,GAAO,SAAUyE,EAAKwJ,GAC5BJ,EAAQvJ,GAAS2J,EACjBvK,EAASe,SAEd,SAAUA,GACTf,EAASe,EAAKoJ,OAxBtB,IAEI1J,EAASJ,EAFD1D,EAAQ,OAMhByD,EAAcC,EAFD1D,EAAQ,OAIzB,SAAS0D,EAAuB5D,GAAO,OAAOA,GAAOA,EAAII,WAAaJ,EAAM,CAAEK,QAASL,GAmBvF+C,EAAOnD,QAAUA,EAAO,S,kCChCxBF,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAEIkO,EAAcnK,EAFD1D,EAAQ,OAMrB6D,EAAYH,EAFD1D,EAAQ,OAIvB,SAAS0D,EAAuB5D,GAAO,OAAOA,GAAOA,EAAII,WAAaJ,EAAM,CAAEK,QAASL,GAqBvFJ,EAAQS,SAAU,EAAI0D,EAAU1D,SAAS0N,EAAY1N,QAAS,GAC9D0C,EAAOnD,QAAUA,EAAO,S,kCClCxBF,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQS,QAoCR,SAAmBgD,EAAMmB,EAAOlB,EAAUC,IACxC,EAAIO,EAAczD,SAASmE,EAA3B,CAAkCnB,GAAM,EAAI2K,EAAe3N,UAAS,EAAIsD,EAAYtD,SAASiD,IAAYC,IAnC3G,IAEIO,EAAgBF,EAFD1D,EAAQ,OAMvB8N,EAAiBpK,EAFD1D,EAAQ,OAMxByD,EAAcC,EAFD1D,EAAQ,OAIzB,SAAS0D,EAAuB5D,GAAO,OAAOA,GAAOA,EAAII,WAAaJ,EAAM,CAAEK,QAASL,GAyBvF+C,EAAOnD,QAAUA,EAAO,S,kCC1CxBF,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAEXD,EAAQS,QACR,SAAuBiD,GACnB,OAAO,SAAUzD,EAAOsE,EAAOZ,GAC3B,OAAOD,EAASzD,EAAO0D,KAG/BR,EAAOnD,QAAUA,EAAO,S,qBCXxB,IAAMqO,EAAgB/N,EAAQ,MAO9B,SAASgO,KALTnL,EAAOnD,QAAUsO,EASjBA,EAAYzD,UAAU0D,UAAY,SAASC,GACzC,IAAMlE,EAAOhH,KACTgH,EAAKkE,SACTlE,EAAKkE,OAASA,EACdA,EAAOhM,GAAG,SAAS,SAASiM,GAC1BnE,EAAKoE,aAAeD,KAGtBD,EAAOhM,GAAG,SAAS,WACjB8H,EAAK/H,WAGPiM,EAAOhM,GAAG,QAAQ,WAChB8H,EAAKqE,YAITL,EAAYzD,UAAU+D,cAAgB,SAASC,EAAS5C,EAAM6C,GAC5D,MAAM,IAAItL,MAAM,kDAGlB8K,EAAYzD,UAAUkE,YAAc,SAASF,EAASG,GACvC1L,KACRkL,OAAOS,UAAUZ,EAAcQ,GAAUG,IAKhDV,EAAYzD,UAAU8D,KAAO,aAE7BL,EAAYzD,UAAUtI,MAAQ,c,kECxCxB2M,EAAgB5O,EAAQ,MAQxB6O,E,2CASJ,WAAa1F,EAAMoD,EAASpH,GAAM,MAEhC,GAFgC,WAE3B2J,OAAOC,UAAU5F,GAAO,MAAM,IAAIjG,MACrC,8BAEF,IAAKqJ,GAA8B,kBAAZA,EAAsB,MAAM,IAAIrJ,MACrD,wCAN8B,OAShC,cAAMqJ,IACDpD,KAAOA,OACCtJ,IAATsF,IAAoB,EAAKA,KAAOA,GAXJ,E,mCAmBlC,WACE,IAAM6J,EAAa,CACjB7F,KAAMnG,KAAKmG,KACXoD,QAASvJ,KAAKuJ,SAIhB,YAFkB1M,IAAdmD,KAAKmC,OAAoB6J,EAAW7J,KAAOnC,KAAKmC,MAChDnC,KAAKiM,QAAOD,EAAWC,MAAQjM,KAAKiM,OACjCD,I,sBAST,WACE,OAAOJ,EACL5L,KAAKkM,YACLC,EACA,O,KAhDyBjM,QA0DzBkM,E,2CASJ,WAAYjG,EAAMoD,EAASpH,GAEzB,GAF+B,WAcnC,SAAgCgE,GAC9B,OAAO2F,OAAOC,UAAU5F,IAASA,GAAQ,KAAQA,GAAQ,KAblDkG,CAAuBlG,GAC1B,MAAM,IAAIjG,MACR,6DAJ2B,mBAQzBiG,EAAMoD,EAASpH,G,UAjBW0J,GA2BpC,SAASM,EAAkBxB,EAAGhO,GAC5B,GAAc,eAAVA,EAGJ,OAAOA,EAKTkD,EAAOnD,QAAW,CAChBmP,mBACAO,0B,yZCvGF5P,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAGXD,EAAQS,QAAU,SAAUmP,EAAOjM,GAE/B,GADAA,GAAW,EAAIU,EAAO5D,SAASkD,GAAYS,EAAO3D,WAC7C,EAAIoP,EAAUpP,SAASmP,GAAQ,OAAOjM,EAAS,IAAIH,MAAM,8DAC9D,IAAKoM,EAAM7M,OAAQ,OAAOY,IAC1B,IAAImM,EAAY,EAEhB,SAASC,EAAStD,GACd,IAAIuD,GAAO,EAAIjM,EAAYtD,SAASmP,EAAME,MAC1CrD,EAAKjB,MAAK,EAAIlH,EAAW7D,SAASwL,IAClC+D,EAAK3M,MAAM,KAAMoJ,GAGrB,SAASR,EAAKvH,GACV,GAAIA,GAAOoL,IAAcF,EAAM7M,OAC3B,OAAOY,EAASN,MAAM,KAAME,WAEhCwM,GAAS,EAAI/C,EAAQvM,SAAS8C,UAAW,IAG7CwM,EAAS,KAGb,IAEIF,EAAY7L,EAFD1D,EAAQ,OAMnB8D,EAASJ,EAFD1D,EAAQ,OAMhB+D,EAASL,EAFD1D,EAAQ,OAMhB0M,EAAUhJ,EAFD1D,EAAQ,OAMjBgE,EAAaN,EAFD1D,EAAQ,OAMpByD,EAAcC,EAFD1D,EAAQ,OAIzB,SAAS0D,EAAuB5D,GAAO,OAAOA,GAAOA,EAAII,WAAaJ,EAAM,CAAEK,QAASL,GAEvF+C,EAAOnD,QAAUA,EAAO,S,kCCpDxBF,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQS,QAiFR,SAAuBmP,EAAOjM,IAC5B,EAAIsM,EAAWxP,SAASkL,EAASlL,QAASmP,EAAOjM,IAhFnD,IAEIgI,EAAW3H,EAFD1D,EAAQ,OAMlB2P,EAAajM,EAFD1D,EAAQ,OAIxB,SAAS0D,EAAuB5D,GAAO,OAAOA,GAAOA,EAAII,WAAaJ,EAAM,CAAEK,QAASL,GA0EvF+C,EAAOnD,QAAUA,EAAO,S,kCCvFxBF,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAEXD,EAAQS,QAoBR,SAAmBmN,EAAQgC,EAAOjM,GAC9BA,EAAWA,GAAYS,EAAO3D,QAC9B,IAAIqN,GAAU,EAAIlK,EAAcnD,SAASmP,GAAS,GAAK,GAEvDhC,EAAOgC,GAAO,SAAUI,EAAM3K,EAAK1B,IAC/B,EAAII,EAAYtD,SAASuP,EAAzB,EAA+B,SAAUtL,EAAKuG,GACtC1H,UAAUR,OAAS,IACnBkI,GAAS,EAAI+B,EAAQvM,SAAS8C,UAAW,IAE7CuK,EAAQzI,GAAO4F,EACftH,EAASe,SAEd,SAAUA,GACTf,EAASe,EAAKoJ,OA/BtB,IAEI1J,EAASJ,EAFD1D,EAAQ,OAMhBsD,EAAgBI,EAFD1D,EAAQ,OAMvB0M,EAAUhJ,EAFD1D,EAAQ,OAMjByD,EAAcC,EAFD1D,EAAQ,OAIzB,SAAS0D,EAAuB5D,GAAO,OAAOA,GAAOA,EAAII,WAAaJ,EAAM,CAAEK,QAASL,GAkBvF+C,EAAOnD,QAAUA,EAAO,S,qBCxCxB,IAAMkQ,EAAc5P,EAAQ,MACtB6P,EAAsB7P,EAAQ,MAAqB8P,IAAIC,SACrDlB,EAAqB7O,EAAQ,MAA7B6O,iBAEFmB,EAAgC,4BAEhCC,EAAmB,8DAEnBC,EAAiB,CACrB/G,KAAM0G,EACNtD,QAAS4D,EAAmBN,IAW9B,SAASM,EAAmBhH,GAA0C,IAApCiH,EAAoC,uDAAlBH,EAElD,GAAInB,OAAOC,UAAU5F,GAAO,CAE1B,IAAMkH,EAAalH,EAAKe,WACxB,GAAI0F,EAAYS,GAAa,OAAOT,EAAYS,GAAY9D,QAE5D,GAAI+D,EAAqBnH,GAAO,OAAO6G,EAMzC,OAAOI,EAUT,SAASG,EAAYpH,GAEnB,IAAK2F,OAAOC,UAAU5F,GAAO,OAAO,EAEpC,IAAMkH,EAAalH,EAAKe,WACxB,QAAI0F,EAAYS,MAEZC,EAAqBnH,GAmE3B,SAASmH,EAAsBnH,GAC7B,OAAOA,IAAS,OAASA,IAAS,KAGpC,SAASqH,EAAqBpO,GAC5B,OAAIA,GAA0B,kBAAVA,IAAuBO,MAAM8N,QAAQrO,GAChD5C,OAAOkR,OAAO,GAAItO,GAEpBA,EAKTS,EAAOnD,QAAU,CACfyQ,qBACAI,cACAI,eA9DF,SAAyBvO,GAAuC,IAAhCwO,EAAgC,uDAAhBV,EAE9C,IACGU,IACA9B,OAAOC,UAAU6B,EAAczH,OACC,kBAA1ByH,EAAcrE,QAErB,MAAM,IAAIrJ,MACR,sEAIJ,GAAId,aAAiByM,EACnB,OAAOzM,EAAM8M,YAGf,IAAMF,EAAa,GAyBnB,OAvBI5M,GAASmO,EAAYnO,EAAM+G,OAE7B6F,EAAW7F,KAAO/G,EAAM+G,KAEpB/G,EAAMmK,SAAoC,kBAAlBnK,EAAMmK,SAChCyC,EAAWzC,QAAUnK,EAAMmK,QACvBnK,EAAMiH,eAAe,UAAS2F,EAAW7J,KAAO/C,EAAM+C,QAE1D6J,EAAWzC,QAAU4D,EAAmBnB,EAAW7F,MACnD6F,EAAW7J,KAAO,CAAE0L,cAAeL,EAAoBpO,OAIzD4M,EAAW7F,KAAOyH,EAAczH,KAChC6F,EAAWzC,QACTnK,GAASA,EAAMmK,QACXnK,EAAMmK,QACNqE,EAAcrE,QAEpByC,EAAW7J,KAAO,CAAE0L,cAAeL,EAAoBpO,KAGrDA,GAASA,EAAM6M,QAAOD,EAAWC,MAAQ7M,EAAM6M,OAC5CD,GAsBPgB,kC,yDCpIIc,E,2CAGJ,WAAaC,GAAe,MAE1B,GAF0B,UAC1B,gBACKA,EAAe,MAAM,IAAI7N,MAAM,mEAFV,OAG1B,EAAK8N,eAAiBD,EAHI,E,mCAO5B,SAAW7C,GACT,GAAIlL,KAAKiO,WAAY,MAAM,IAAI/N,MAAM,0EACrC,IAAMgO,EAAehD,EAAOiD,cACtBF,EAAajO,KAAKgO,eAAe,CAAE9C,SAAQtM,SAAUsM,EAAQgD,iBACnE,IAAKD,EAAY,MAAM,IAAI/N,MAAM,iFACjC,GAA0B,oBAAf+N,EAA2B,MAAM,IAAI/N,MAAM,+EACtDF,KAAKiO,WAAaA,I,2BAGpB,SAAeG,EAAKC,EAAaC,GAC/B,IAAMC,EAAM,CAAEnM,GAAIgM,EAAIhM,IACtBpC,KAAKiO,WAAWG,EAAKG,GAErB,SAAyBC,GACvBH,GAAY,SAACjN,EAAKuG,EAAQ+D,GAEpBtK,UACKmN,EAAI5G,OACX4G,EAAInP,MAAQ,CAAEmK,QAASnI,EAAImI,SAAWnI,IAEtCmN,EAAI5G,OAASA,EAGX6G,EACFA,EAAQ9C,GAERA,UAKN,SAAwBtK,GACtB,GAAIA,EAAK,OAAOkN,EAAWlN,GAC3BkN,EAAW,KAAMC,EAAI5G,e,GA/CP3K,EAAQ,OAqD5B6C,EAAOnD,QAAUoR,G,qBCrDjB,IAAMW,EAAezR,EAAQ,IAAUyR,aACjCC,EAAW1R,EAAQ,KAAQ0R,SAC3BC,EAAU3R,EAAQ,MAClB4R,EAAkB5R,EAAQ,MAC1B6R,EAAM7R,EAAQ,MACd8R,EAAa9R,EAAQ,MACrB+R,EAAY/R,EAAQ,MAEpB+N,GADa/N,EAAQ,MACLA,EAAQ,OAQ9B,SAAS6B,EAAmBmQ,GAC1B,IAAMhI,EAAOhH,KACbyO,EAAatH,KAAKH,GAClBA,EAAKiI,gBAAgB,IAErBD,EAAOA,GAAQ,GAGf,IAAME,EAAiB,CAAEvD,UAAW3E,EAAKmI,aAAaC,KAAKpI,IACrDqI,EAAuBL,EAAKK,sBAAwBH,EAC1DlI,EAAKmH,cAAgBa,EAAKd,cAAgB,IAAIU,EAAgB,CAC5DhQ,SAAUyQ,EACVnR,gBAAiB8Q,EAAK9Q,iBAAmB,IACzCoR,kBAAkB,IAIpBtI,EAAKuI,OAAS,IAAIR,EAGlB/H,EAAKoE,aAAe,KACpBpE,EAAKwI,WAAa,GAsNpB,SAASC,EAAeC,GACtB,MAAO,CACLC,OAAkBhB,EAAQiB,SAASF,EAAUC,QAC7CE,KAAkBlB,EAAQiB,SAASF,EAAUG,MAC7CC,WAAkBnB,EAAQiB,SAASF,EAAUI,YAC7CC,MAAkBpB,EAAQiB,SAASF,EAAUK,OAC7CC,QAAkBrB,EAAQiB,SAASF,EAAUM,SAC7CC,WAAkBtB,EAAQiB,SAASF,EAAUO,YAC7CC,UAAkBvB,EAAQiB,SAASF,EAAUQ,WAC7CC,iBAAkBxB,EAAQiB,SAASF,EAAUS,kBAC7CC,UAAkBzB,EAAQiB,SAASF,EAAUU,WAC7CC,aAAkB1B,EAAQiB,SAASF,EAAUY,aAAeZ,EAAUW,cACtEE,MAAkB5B,EAAQiB,SAASF,EAAUa,OAC7CC,WAAkB7B,EAAQiB,SAASF,EAAUc,YAC7CC,gBAAkB9B,EAAQiB,SAASF,EAAUe,iBAC7CC,KAAkB/B,EAAQiB,SAASF,EAAUgB,MAC7CC,UAAkBhC,EAAQiB,SAASF,EAAUiB,WAC7CC,SAAkBjC,EAAQiB,SAASF,EAAUkB,UAC7CC,QAAkBlC,EAAQiB,SAASF,EAAUmB,SAC7CC,UAAkBnC,EAAQiB,SAASF,EAAUoB,WAC7CC,aAAkBrB,EAAUqB,cApQhClR,EAAOnD,QAAUmC,EAGjB6P,EAAS7P,EAAoB4P,GA4B7B5P,EAAmB0I,UAAUtI,MAAQ,WAAmB,WAChD+H,EAAOhH,KAGbgH,EAAKuI,OAAOyB,KAGZhK,EAAKmH,cAAcjP,GAAG,UAAU,SAAC+R,GAE/BjK,EAAKkK,2BAA2BD,GAAa,SAAC7P,EAAK+J,GACjD,GAAI/J,EACF,EAAK+P,KAAK,QAAS/P,OADrB,CAIA,IAAK+J,EAGH,OAFAhM,QAAQiS,IAAIjG,QACZ,EAAKgG,KAAK,QAAS,IAAIjR,MAAM,yBAG/B,IAAMmR,EAAc5B,EAActE,GAElCnE,EAAKsK,iBAAiBD,GAEtBrK,EAAKmK,KAAK,WAAYhG,GACtBnE,EAAKmK,KAAK,SAAUhG,UAKxBnE,EAAKmH,cAAcjP,GAAG,OAAQ8H,EAAKmK,KAAK/B,KAAKpI,EAAM,SACnDA,EAAKmH,cAAcjP,GAAG,QAAS8H,EAAKmK,KAAK/B,KAAKpI,EAAM,UAGpDA,EAAKuK,UAAW,EAEhBvK,EAAKmK,KAAK,UAGZtS,EAAmB0I,UAAU8D,KAAO,WAClC,IAAMrE,EAAOhH,KAEbgH,EAAKmH,cAAcqD,qBAEnBxK,EAAKuK,UAAW,EAEhBvK,EAAKmK,KAAK,SAGZtS,EAAmB0I,UAAUkK,UAAY,WAEvC,OADazR,KACDuR,UAGd1S,EAAmB0I,UAAUzI,YAAc,SAAS4S,EAAQzQ,GAErC,kBAAVA,EADEjB,KAENwP,WAAWmC,OAAO1Q,EAAO,EAAGyQ,GAFtB1R,KAINwP,WAAWtH,KAAKwJ,GAEvBA,EAAOzG,UAAUjL,OAGnBnB,EAAmB0I,UAAUqK,eAAiB,SAASF,GACrD,IACMzQ,EADOjB,KACMwP,WAAWzH,QAAQ2J,GACtC,GAAIzQ,EAAQ,EAAG,MAAM,IAAIf,MAAM,uBAFlBF,KAGRwP,WAAWmC,OAAO1Q,EAAO,IAGhCpC,EAAmB0I,UAAUd,KAAO,SAAS8E,GAC3C,MAAM,IAAIrL,MAAM,8DAGlBrB,EAAmB0I,UAAUoE,UAAY,SAASJ,EAASG,GACzD,IAAM1E,EAAOhH,KACbgH,EAAKuI,OAAOsC,OAAM,WAEZlS,MAAM8N,QAAQlC,GAEhBsD,EAAItD,EAASvE,EAAKmI,aAAaC,KAAKpI,GAAO0E,GAG3C1E,EAAKmI,aAAa5D,EAASG,OAQjC7M,EAAmB0I,UAAU2J,2BAA6B,SAASD,EAAavF,GAC9E,IAAM1E,EAAOhH,KAET8R,EAAmB,EAGvB,YADAC,IAGA,SAASA,IACP/K,EAAKgL,kBAAkBf,EAAagB,GAGtC,SAASA,EAAc7Q,EAAK+J,GAE1B,OAAI/J,EAAYsK,EAAGtK,GAEd+J,OAeLO,EAAG,KAAMP,GAdH2G,EAAmB,GAErBA,SACAvM,YAAW,WACTwM,MACC,WAIHrG,EAAG,KAAM,QAWjB7M,EAAmB0I,UAAUyK,kBAAoB,SAASf,EAAavF,GACrE,IAAM0C,EAAMrD,EAAc,CAAErG,OAAQ,uBAAwBpC,OAAQ,CAAC2O,GAAa,GAAQiB,WAAW,IACrGlS,KAAKmP,aAAaf,GAAK,SAAChN,EAAKmN,GAC3B,OAAInN,EAAYsK,EAAGtK,GACZsK,EAAG,KAAM6C,EAAI5G,YAIxB9I,EAAmB0I,UAAU4H,aAAe,SAAS5D,EAAS4G,GAC5D,IAAInL,EAAOhH,KACPoS,GAAmB,EACnBzK,EAAS,KACTvI,EAAQ,KAER6M,EAAQ,GAsBZ,SAAST,EAAI6G,EAAQC,GACnBlT,EAAQiT,EACR1K,EAAS2K,EAETxD,EAAW7C,GAAO,SAAS3O,EAAI+C,GAEzB/C,EACFA,EAAG8B,EAAOuI,EAAQtH,GAElBA,OAED,WAED,IAAIkS,EAAY,CACdnQ,GAAImJ,EAAQnJ,GACZC,QAASkJ,EAAQlJ,QACjBsF,OAAQA,GAGG,MAATvI,GACFmT,EAAUnT,MAAQ,CAChBmK,QAASnK,EAAM6M,OAAS7M,EAAMmK,SAAWnK,EACzC+G,MAAO,MAGTgM,EAAS/S,EAAOmT,IAEhBJ,EAAS,KAAMI,OA7CrB,SAAS5J,EAAK6J,GAMZ,GALAJ,GAAmB,EACnBnG,EAAMwG,QAAQD,GAIVJ,GAAmBpL,EAAKwI,WAAW/P,OACrC+L,EAAI,IAAItL,MAAM,uBAAyBqL,EAAQ7G,OAAS,yHAExD,IACiBsC,EAAKwI,WAAW4C,GACtB9G,cAAcC,EAAS5C,EAAM6C,GACtC,MAAO7H,GACP6H,EAAI7H,IAfVgF,IAyDF9J,EAAmB0I,UAAU+J,iBAAmB,SAASnG,GAC1CnL,KACRoL,aAAeD,EADPnL,KAERmR,KAAK,QAAShG,K,qBCtPrB,IAAMsD,EAAezR,EAAQ,IAAUyR,aACjCC,EAAW1R,EAAQ,KAAQ0R,SAOjC,SAASK,IAEPN,EAAatH,KADAnH,WAER0S,UAAW,EARlB7S,EAAOnD,QAAUqS,EAGjBL,EAASK,EAAWN,GAQpBM,EAAUxH,UAAUyJ,GAAK,WACVhR,KACR0S,UAAW,EADH1S,KAERmR,KAAK,WAGZpC,EAAUxH,UAAU8D,KAAO,WACZrL,KACR0S,UAAW,EADH1S,KAERmR,KAAK,SAGZpC,EAAUxH,UAAUsK,MAAQ,SAASvU,GACtB0C,KACJ0S,SADI1S,KAEN2S,KAAK,SAAUrV,GAEpBiI,WAAWjI,K,qBC/Bf,IAAM8H,EAAYpI,EAAQ,MAkB1B,SAAS4V,EAASrH,GAChB,MAAwC,UAAjCsH,EAAoBtH,GAc7B,SAASuH,EAAsBvH,GAC7B,IAAItK,EAAQ8R,EAAmBxH,GAG/B,OAAItK,GAASsK,EAAQjJ,OAAO7C,OACnB8L,EAAQjJ,OAIM,yBAAnBiJ,EAAQ7G,OACH6G,EAAQjJ,OAAO0F,MAAM,GAGvBuD,EAAQjJ,OAAO0F,MAAM,EAAE/G,GAGhC,SAAS8R,EAAmBxH,GAC1B,OAAOA,EAAQ7G,QAEb,IAAK,mBACH,OAAO,EAET,IAAK,iBACL,IAAK,cACL,IAAK,0BACL,IAAK,WACL,IAAK,kBACH,OAAO,EAET,IAAK,uBACH,OAAO,EAET,QACE,QAIN,SAASmO,EAAoBtH,GAC3B,OAAQA,EAAQ7G,QAEd,IAAK,qBACL,IAAK,YACL,IAAK,sBACL,IAAK,qCACL,IAAK,+BACL,IAAK,cACL,IAAK,qBACL,IAAK,2BACL,IAAK,wCACL,IAAK,4BACL,IAAK,kCACL,IAAK,mBACL,IAAK,iBACL,IAAK,sBACL,IAAK,qBACL,IAAK,cACH,MAAO,QAGT,IAAK,uBACL,IAAK,uCACL,IAAK,iCACL,IAAK,0CACL,IAAK,oCACH,MAAO,OAGT,IAAK,eACL,IAAK,iBACL,IAAK,mBACL,IAAK,0BACL,IAAK,WACL,IAAK,kBACL,IAAK,oBACL,IAAK,cACL,IAAK,kBACH,MAAO,QAGT,IAAK,cACL,IAAK,gBACL,IAAK,gBACL,IAAK,cACL,IAAK,WACL,IAAK,eACL,IAAK,aACL,IAAK,eACL,IAAK,eACL,IAAK,sBACL,IAAK,yBACL,IAAK,gBACL,IAAK,qBACL,IAAK,kCACL,IAAK,sBACL,IAAK,uBACL,IAAK,cACL,IAAK,iBACL,IAAK,qBACL,IAAK,eACL,IAAK,eACL,IAAK,YACL,IAAK,YACL,IAAK,WACL,IAAK,kBACL,IAAK,kBACL,IAAK,eACL,IAAK,iBACL,IAAK,gBACL,IAAK,sBACL,IAAK,uBACL,IAAK,kBACH,MAAO,SA9Ib7E,EAAOnD,QAAU,CACfsW,0BAQF,SAAmCzH,GAAmB,IAAVyD,EAAU,uDAAH,GACjD,IAAK4D,EAASrH,GAAU,OAAO,KAC/B,IAAQ0H,EAAoBjE,EAApBiE,gBACF3Q,EAAS2Q,EAAkB1H,EAAQjJ,OAASwQ,EAAsBvH,GACxE,OAAOA,EAAQ7G,OAAS,IAAMU,EAAU9C,IAXxCsQ,SAAUA,EACVM,mBAiBF,SAA4B3H,GAC1B,IAAItK,EAAQ8R,EAAmBxH,GAG/B,GAAItK,GAASsK,EAAQjJ,OAAO7C,OAC1B,OAAO,KAGT,OAAO8L,EAAQjJ,OAAOrB,IAxBtB6R,sBAAuBA,EACvBC,mBAAoBA,EACpBF,oBAAqBA,I,mBCRvBhT,EAAOnD,QAGP,WAEE,OAAO6C,KAAK4T,MAAMrH,OAAOsH,iBAAmB7T,KAAK8T,Y,sBCLnD,gBAAMjQ,EAAM+G,EAAQmJ,QAAUtW,EAAQ,MAASA,EAAQ,MACjD0R,EAAW1R,EAAQ,KAAQ0R,SAC3B3D,EAAgB/N,EAAQ,MACxBuW,EAAcvW,EAAQ,MAC5B,EAAsCA,EAAQ,MAAtCwW,EAAR,EAAQA,UAAW7F,EAAnB,EAAmBA,eAOnB,SAASlP,EAAUuQ,GACJhP,KACRnC,OAASmR,EAAKnR,OANrBgC,EAAOnD,QAAU+B,EAEjBiQ,EAASjQ,EAAW8U,GAOpB9U,EAAU8I,UAAU+D,cAAgB,SAASC,EAAS5C,EAAM6C,GAC1D,IACMiI,EADOzT,KACUnC,OAGjB6V,EAuDR,SAA0BnI,GACxB,MAAO,CACLnJ,GAAImJ,EAAQnJ,GACZC,QAASkJ,EAAQlJ,QACjBqC,OAAQ6G,EAAQ7G,OAChBpC,OAAQiJ,EAAQjJ,QA5DOqR,CAAgBpI,GACnCqI,EAAa7I,EAAc2I,GAEjCtQ,EAAI,CACFR,IAAK6Q,EACL/O,OAAQ,OACRC,QAAS,CACP,OAAU,mBACV,eAAgB,oBAElBzB,KAAMY,KAAKsB,UAAUwO,GACrBC,oBAAoB,EACpB5N,QAAS,MACR,SAAS7E,EAAKmN,EAAKrL,GACpB,GAAI9B,EAAK,OAAOoK,EAAImC,EAAevM,IAGnC,OAAQmN,EAAInK,YACV,KAAK,IACH,OAAOoH,EAAIgI,EAAU1G,IAAIgH,kBAC3B,KAAK,IACH,OAAQ,WAGN,IAAM1S,EAAM,IAAIlB,MADhB6T,0HAEA,OAAOvI,EAAImC,EAAevM,IAJpB,GAMV,KAAK,IACH,OAAQ,WACN,IAAMA,EAAM,IAAIlB,MAAJ,qBACZ,OAAOsL,EAAImC,EAAevM,IAFpB,GAIV,QACE,GAAsB,KAAlBmN,EAAInK,WAAmB,CACzB,IAAM2P,EAAM,kBAAoBxF,EAAIrL,KAC9B9B,EAAM,IAAIlB,MAAM6T,GACtB,OAAOvI,EAAImC,EAAevM,KAKhC,IAAIe,EACJ,IACEA,EAAO2B,KAAKC,MAAMb,GAClB,MAAO9B,GAEP,OADAjC,QAAQC,MAAMgC,EAAI6K,OACXT,EAAImC,EAAevM,IAE5B,GAAIe,EAAK/C,MAAO,OAAOoM,EAAIrJ,EAAK/C,OAEhCoM,EAAI,KAAMrJ,EAAKwF,c,uCCtEnB,MAAoD3K,EAAQ,MAApD6O,EAAR,EAAQA,iBAAkBO,EAA1B,EAA0BA,sBAC1B,EAEIpP,EAAQ,MADV2Q,EADF,EACEA,eAAgBR,EADlB,EACkBA,mBAEZqG,EAAYxW,EAAQ,MACpBgX,EAAchX,EAAQ,MAE5B6C,EAAOnD,QAAU,CACf8W,YACA3H,mBACAO,wBACAuB,iBACAR,qBAEA6G,gB,qqCCdF,EAAoDhX,EAAQ,MAApD6O,EAAR,EAAQA,iBAAkBO,EAA1B,EAA0BA,sBAClBe,EAAuBnQ,EAAQ,MAA/BmQ,mBACF6G,EAAchX,EAAQ,MAwN5B,SAASiX,EAAmB9N,EAAM6I,GAChC,MAA0BkF,EAAalF,GAAvC,SAAQzF,EAAR,KAAiBpH,EAAjB,KACA,OAAO,IAAI0J,EACT1F,EACAoD,GAAW4D,EAAmBhH,GAC9BhE,GAIJ,SAASgS,EAAoBhO,EAAM6I,GACjC,MAA0BkF,EAAalF,GAAvC,SAAQzF,EAAR,KAAiBpH,EAAjB,KACA,OAAO,IAAIiK,EACTjG,EACAoD,GAAW4D,EAAmBhH,GAC9BhE,GAIJ,SAAS+R,EAAclF,GACrB,IAAIzF,EAASpH,EASb,OARI6M,IACkB,kBAATA,EACTzF,EAAUyF,EACe,kBAATA,GAAsBrP,MAAM8N,QAAQuB,KACpDzF,EAAUyF,EAAKzF,QACfpH,EAAO6M,EAAK7M,OAGT,CAAEoH,EAASpH,GAlPpBtC,EAAOnD,QAAU,CACfoQ,IAAK,CASH/I,MAAO,SAACiL,GAAD,OAAUiF,EACfD,EAAYlH,IAAI/I,MAAOiL,IAWzBoF,eAAgB,SAACpF,GAAD,OAAUiF,EACxBD,EAAYlH,IAAIsH,eAAgBpF,IAWlCqF,cAAe,SAACrF,GAAD,OAAUiF,EACvBD,EAAYlH,IAAIuH,cAAerF,IAWjC8E,eAAgB,SAAC9E,GAAD,OAAUiF,EACxBD,EAAYlH,IAAIgH,eAAgB9E,IAWlCjC,SAAU,SAACiC,GAAD,OAAUiF,EAClBD,EAAYlH,IAAIC,SAAUiC,IAc5BsF,OAAQ,SAACtF,GACP,IAAKA,GAAwB,kBAATA,GAAqBrP,MAAM8N,QAAQuB,GACrD,MAAM,IAAI9O,MAAM,mEAElB,IAAQiG,EAAS6I,EAAT7I,KACR,IAAK2F,OAAOC,UAAU5F,IAASA,GAAQ,OAASA,GAAQ,MACtD,MAAM,IAAIjG,MACR,iEAGJ,OAAO+T,EAAmB9N,EAAM6I,IAWlCuF,aAAc,SAACvF,GAAD,OAAUiF,EACtBD,EAAYlH,IAAIyH,aAAcvF,IAWhCwF,iBAAkB,SAACxF,GAAD,OAAUiF,EAC1BD,EAAYlH,IAAI0H,iBAAkBxF,IAWpCyF,oBAAqB,SAACzF,GAAD,OAAUiF,EAC7BD,EAAYlH,IAAI2H,oBAAqBzF,IAWvC0F,oBAAqB,SAAC1F,GAAD,OAAUiF,EAC7BD,EAAYlH,IAAI4H,oBAAqB1F,IAWvC2F,mBAAoB,SAAC3F,GAAD,OAAUiF,EAC5BD,EAAYlH,IAAI6H,mBAAoB3F,KAIxCpQ,SAAU,CASRgW,oBAAqB,SAAC5F,GACpB,OAAOmF,EACLH,EAAYpV,SAASgW,oBAAqB5F,IAY9C6F,aAAc,SAAC7F,GACb,OAAOmF,EACLH,EAAYpV,SAASiW,aAAc7F,IAYvC8F,kBAAmB,SAAC9F,GAClB,OAAOmF,EACLH,EAAYpV,SAASkW,kBAAmB9F,IAa5C+F,OAAQ,SAAC/F,GACP,IAAKA,GAAwB,kBAATA,GAAqBrP,MAAM8N,QAAQuB,GACrD,MAAM,IAAI9O,MAAM,wEAElB,IAAQiG,EAAwB6I,EAAxB7I,KAAMoD,EAAkByF,EAAlBzF,QAASpH,EAAS6M,EAAT7M,KACvB,IAAKoH,GAA8B,kBAAZA,EAAsB,MAAM,IAAIrJ,MACrD,uCAEF,OAAO,IAAIkM,EAAsBjG,EAAMoD,EAASpH,O,qBC5MtD,IAAM6S,EAAYhY,EAAQ,MACpBiY,EAAWjY,EAAQ,MACnB0R,EAAW1R,EAAQ,KAAQ0R,SAC3BC,EAAU3R,EAAQ,MAClBkY,EAAUlY,EAAQ,MAClBkF,EAASlF,EAAQ,MACjBmY,EAAYnY,EAAQ,MACpBuW,EAAcvW,EAAQ,MACtBoY,EAAcpY,EAAQ,MACtBqY,EAAW,kBAuCjB,SAAS9W,EAAwByQ,GAC/B,IAAMhI,EAAOhH,KAEbgH,EAAKsO,UAAYH,EAAU,GAGvBnG,EAAKrR,cAAaqJ,EAAKrJ,YAAcqR,EAAKrR,aAE1CqR,EAAKuG,qBAAoBvO,EAAKuO,mBAAqBvG,EAAKuG,oBACxDvG,EAAKlR,iBAAgBkJ,EAAKlJ,eAAiBkR,EAAKlR,gBAChDkR,EAAKjR,yBAAwBiJ,EAAKjJ,uBAAyBiR,EAAKjR,wBAChEiR,EAAKwG,sBAAqBxO,EAAKwO,oBAAsBxG,EAAKwG,qBAE9DxO,EAAKyO,mBAAqBzG,EAAKyG,oBAAsBzO,EAAK0O,YAC1D1O,EAAK2O,eAAiB3G,EAAK2G,gBAAkB3O,EAAK0O,YAClD1O,EAAK4O,uBAAyB5G,EAAK4G,wBAA0B5O,EAAK0O,YAClE1O,EAAK6O,sBAAwB7G,EAAK6G,uBAAyB7O,EAAK0O,YAChE1O,EAAK8O,2BAA6B9G,EAAK8G,4BAA8B9O,EAAK0O,YAC1E1O,EAAK+O,oBAAsB/G,EAAK+G,qBAAuB/O,EAAK0O,YAExD1G,EAAKpR,kBAAiBoJ,EAAKpJ,gBAAkBoR,EAAKpR,iBAAoBoY,EAAyB,oBAC/FhH,EAAKhR,cAAagJ,EAAKhJ,YAAcgR,EAAKhR,aAAgBgY,EAAyB,gBACnFhH,EAAK/Q,sBAAqB+I,EAAK/I,oBAAsB+Q,EAAK/Q,qBAAwB+X,EAAyB,wBAC3GhH,EAAKiH,iBAAgBjP,EAAKiP,eAAiBjH,EAAKiH,gBAAmBD,EAAyB,mBAC5FhH,EAAKkH,sBAAqBlP,EAAKkP,oBAAsBlH,EAAKkH,qBAAwBF,EAAyB,wBAC3GhH,EAAKmH,mBAAkBnP,EAAKmP,iBAAmBnH,EAAKmH,kBAAqBH,EAAyB,qBAClGhH,EAAKoH,2BAA0BpP,EAAKoP,yBAA2BpH,EAAKoH,0BAEpEpH,EAAKqH,qBAAoBrP,EAAKqP,mBAAqBrH,EAAKqH,oBAE5DrP,EAAKoO,YAAcpG,EAAKoG,aAAepO,EAAKoO,YAC5CpO,EAAKsP,YAActH,EAAKsH,aAAetP,EAAKsP,YAwkB9C,SAASrO,EAAYhB,GACnB,OAAOA,EAAOgB,cAGhB,SAASsO,EAAkBtP,GACzB,IAAMuP,EAAQ7H,EAAQ8H,aAAaxP,GAEnC,OADgB0H,EAAQ+H,eAAeF,GAMzC,SAASG,EAAe1P,GACtB,IAAMuP,EAAQ7H,EAAQ8H,aAAaxP,GAEnC,OADuB0H,EAAQ+H,eAAeF,IACpBI,EAAW3P,GAGvC,SAAS2P,EAAWzU,GAElB,MADiC,kBAATA,IAEkB,OAApBA,EAAK6F,MAAM,EAAE,IAEf7F,EAAK6F,MAAM,GACH6O,MAAMxB,IAIpC,SAASW,EAAyBc,GAChC,OAAO,SAASxU,EAAQoJ,GACtBA,EAAG,IAAIxL,MAAM,4DAA8D4W,EAAa,iCA1qB5FjX,EAAOnD,QAAU6B,EAmCjBmQ,EAASnQ,EAAyBgV,GAoClChV,EAAwBgJ,UAAU+D,cAAgB,SAASC,EAAS5C,EAAM6C,GACxE,IAMIuL,EAAUC,EAAWC,EACrB1N,EAAS2N,EAPPlQ,EAAOhH,KASb,OARAgH,EAAKmQ,gBAAkB,GACvBnQ,EAAKoQ,oBAAsB,EAOpB7L,EAAQ7G,QAEb,IAAK,eAOH,YALAsC,EAAKrJ,aAAY,SAASyD,EAAKiW,GAC7B,GAAIjW,EAAK,OAAOoK,EAAIpK,GACpB,IAAIuG,EAAS0P,EAAS,IAAM,KAC5B7L,EAAI,KAAM7D,MAId,IAAK,eAMH,YAJAX,EAAKrJ,aAAY,SAASyD,EAAKiW,GAC7B,GAAIjW,EAAK,OAAOoK,EAAIpK,GACpBoK,EAAI,KAAM6L,MAId,IAAK,sBAMH,OALAN,EAAWxL,EAAQjJ,OAAO,QAC1B0S,EAAU,CACR,SAACtJ,GAAD,OAAQ1E,EAAKsQ,oBAAoBP,EAAUrL,IAC3C,SAACA,GAAD,OAAQ1E,EAAKuO,mBAAmBwB,EAAUrL,KACzCF,GAGL,IAAK,sBAMH,OALAuL,EAAWxL,EAAQjJ,OAAO,QAC1B0S,EAAU,CACR,SAACtJ,GAAD,OAAQ1E,EAAKsQ,oBAAoBP,EAAUrL,IAC3C,SAACA,GAAD,OAAQ1E,EAAKuQ,uBAAuBR,EAAUrL,KAC7CF,GAGL,IAAK,WAeH,OAbA0L,EAAU3L,EAAQjJ,OAAO,GACzBiH,EAAUgC,EAAQjJ,OAAO,GAGzB2U,EAAc1L,EAAQjJ,OAAO,IAAM,GACnC0U,EAAY9U,EAAO+U,EAAa,CAC9BO,KAAMN,EACN/U,KAAMoH,SAERyL,EAAU,CACR,SAACtJ,GAAD,OAAQ1E,EAAKyQ,gBAAgBT,EAAWtL,IACxC,SAACA,GAAD,OAAQ1E,EAAKlJ,eAAekZ,EAAWtL,KACtCF,GAGL,IAAK,gBACH,OAAQ,WAEN,IAAMkM,EAAQnM,EAAQjJ,OAAO,GAU7B,GAAIqU,EATWpL,EAAQjJ,OAAO,KASDiU,EAAiBmB,GAAQ,CAEzC,gEACA,yCACA,oEACXvY,QAAQwY,KADRC,4NAGAV,EAAU3L,EAAQjJ,OAAO,GACzBiH,EAAUgC,EAAQjJ,OAAO,QAEzBiH,EAAUgC,EAAQjJ,OAAO,GACzB4U,EAAU3L,EAAQjJ,OAAO,GAK3B2U,EAAc1L,EAAQjJ,OAAO,IAAM,GACnC0U,EAAY9U,EAAO+U,EAAa,CAC9BO,KAAMN,EACN/U,KAAMoH,IAERyL,EAAU,CACR,SAACtJ,GAAD,OAAQ1E,EAAK6Q,wBAAwBb,EAAWtL,IAChD,SAACA,GAAD,OAAQ1E,EAAKjJ,uBAAuBiZ,EAAWtL,KAC9CF,GApCG,GAuCV,IAAK,qBACH,OAAQ,WAEN,IAAMkM,EAAQnM,EAAQjJ,OAAO,GAU7B,GAAIqU,EATWpL,EAAQjJ,OAAO,KASDiU,EAAiBmB,GAAQ,CAEzC,gEACA,yCACA,oEACXvY,QAAQwY,KADRC,8NAGAV,EAAU3L,EAAQjJ,OAAO,GACzBiH,EAAUgC,EAAQjJ,OAAO,QAEzBiH,EAAUgC,EAAQjJ,OAAO,GACzB4U,EAAU3L,EAAQjJ,OAAO,GAK3B2U,EAAc1L,EAAQjJ,OAAO,IAAM,GACnC0U,EAAY9U,EAAO+U,EAAa,CAC9BO,KAAMN,EACN/U,KAAMoH,IAERyL,EAAU,CACR,SAACtJ,GAAD,OAAQ1E,EAAK8Q,uBAAuBd,EAAWtL,IAC/C,SAACA,GAAD,OAAQ1E,EAAK+Q,sBAAsBf,EAAWtL,KAC7CF,GApCG,GAuCV,IAAK,wBACH,OAAQ,WACN,IAAM0L,EAAU3L,EAAQjJ,OAAO,GAE/B0S,EAAU,CACR,SAACtJ,GAAD,OAAQ1E,EAAKgR,4BAA4Bd,EAASxL,IAClD,SAACA,GAAD,OAAQ1E,EAAKiR,2BAA2Bf,EAASxL,KAChDF,GANG,GASV,IAAK,qBACH,OAAQ,WACNjC,EAAUgC,EAAQjJ,OAAO,GACzB,IAAI4V,EAAY3M,EAAQjJ,OAAO,GAG/B2U,EAAc1L,EAAQjJ,OAAO,IAAM,GACnC0U,EAAY9U,EAAO+U,EAAa,CAC9BkB,IAAKD,EACL/V,KAAMoH,IAERvC,EAAKoP,yBAAyBY,EAAWxL,GAVnC,GAaV,IAAK,oBACL,IAAK,uBACL,IAAK,uBACH,OAAQ,WAGN,IAAMkM,EAAQnM,EAAQjJ,OAAO,GACvB8V,EAAS7M,EAAQjJ,OAAO,GAE1BiU,EAAiBmB,IACnBR,EAAUQ,EACVnO,EAAU6O,IAEV7O,EAAUmO,EACVR,EAAUkB,GAGZnB,EAAc1L,EAAQjJ,OAAO,IAAM,GACnC0U,EAAY9U,EAAO+U,EAAa,CAC9BO,KAAMN,EACN/U,KAAMoH,IAERyL,EAAU,CACR,SAACtJ,GAAD,OAAQ1E,EAAKqR,qBAAqBrB,EAAWtL,IAC7C,SAACA,GAAD,OAAQ1E,EAAKwO,oBAAoBwB,EAAWtL,KAC3CF,GAtBG,GAyBV,IAAK,yBAGH,OAFAuL,EAAWxL,EAAQjJ,OAAO,QAC1B0E,EAAKsR,sBAAsBvB,EAAUvL,GAGvC,IAAK,kBAIH,OAHA0L,EAAU3L,EAAQjJ,OAAO,GACzBiH,EAAUgC,EAAQjJ,OAAO,QACzB0E,EAAKuR,eAAerB,EAAS3N,EAASiC,GAGxC,IAAK,sBACH,OAAQ,WACN,IAAMgN,EAAYjN,EAAQjJ,OAAO,GACjC0E,EAAKyR,mBAAmBD,EAAWhN,GAF7B,GAKV,IAAK,wBAMH,YALAxE,EAAKrJ,aAAY,SAASyD,EAAKiW,GAC7B,GAAIjW,EAAK,OAAOoK,EAAIpK,GACpB,IAAMsX,EAAUrB,EAAS,IAAM,KAC/B7L,EAAI,KAAMkN,MAId,QAEE,YADA/P,MAUNpK,EAAwBgJ,UAAU5J,YAAc,SAAS+N,GACvDA,EAAG,KAAM,KAQXnN,EAAwBgJ,UAAUgO,mBAAqB,SAASwB,EAAUrL,GACxE,IAAM1E,EAAOhH,KACbgV,EAAU,CACR,SAACtJ,GAAD,OAAQ1E,EAAKyO,mBAAmBsB,EAAUrL,IAC1C,SAACiN,EAAYjN,GAAb,OAAoB1E,EAAK4R,cAAc,cAAeD,EAAYjN,IAClE,SAACA,GAAD,OAAQ1E,EAAK6R,oBAAoB9B,EAAUrL,KAC1CA,IAILnN,EAAwBgJ,UAAUgQ,uBAAyB,SAASR,EAAUrL,GAC5E,IAAM1E,EAAOhH,KACbgV,EAAU,CACR,SAACtJ,GAAD,OAAQ1E,EAAKyO,mBAAmBsB,EAAUrL,IAC1C,SAACiN,EAAYjN,GAAb,OAAoB1E,EAAK4R,cAAc,cAAeD,EAAYjN,IAClE,SAACA,GAAD,OAAQ1E,EAAK8R,WAAW/B,EAAUrL,KACjCA,IAGLnN,EAAwBgJ,UAAUzJ,eAAiB,SAASkZ,EAAWtL,GACrE,IAAM1E,EAAOhH,KACbgV,EAAU,CACR,SAACtJ,GAAD,OAAQ1E,EAAK2O,eAAeqB,EAAWtL,IACvC,SAACiN,EAAYjN,GAAb,OAAoB1E,EAAK4R,cAAc,UAAWD,EAAYjN,IAC9D,SAACA,GAAD,OAAQ1E,EAAKhJ,YAAYgZ,EAAWtL,KACnCA,IAGLnN,EAAwBgJ,UAAUxJ,uBAAyB,SAASiZ,EAAWtL,GAC7E,IAAM1E,EAAOhH,KACbgV,EAAU,CACR,SAACtJ,GAAD,OAAQ1E,EAAK4O,uBAAuBoB,EAAWtL,IAC/C,SAACiN,EAAYjN,GAAb,OAAoB1E,EAAK4R,cAAc,UAAWD,EAAYjN,IAC9D,SAACA,GAAD,OAAQ1E,EAAK/I,oBAAoB+Y,EAAWtL,KAC3CA,IAGLnN,EAAwBgJ,UAAUwQ,sBAAwB,SAASf,EAAWtL,GAC5E,IAAM1E,EAAOhH,KACbgV,EAAU,CACR,SAACtJ,GAAD,OAAQ1E,EAAK6O,sBAAsBmB,EAAWtL,IAC9C,SAACiN,EAAYjN,GAAb,OAAoB1E,EAAK4R,cAAc,iBAAkBD,EAAYjN,IACrE,SAACA,GAAD,OAAQ1E,EAAKiP,eAAee,EAAWtL,KACtCA,IAGLnN,EAAwBgJ,UAAU0Q,2BAA6B,SAASjB,EAAWtL,GACjF,IAAM1E,EAAOhH,KACbgV,EAAU,CACR,SAACtJ,GAAD,OAAQ1E,EAAK8O,2BAA2BkB,EAAWtL,IACnD,SAACiN,EAAYjN,GAAb,OAAoB1E,EAAK4R,cAAc,sBAAuBD,EAAYjN,IAC1E,SAACA,GAAD,OAAQ1E,EAAKkP,oBAAoBc,EAAWtL,KAC3CA,IAGLnN,EAAwBgJ,UAAUiO,oBAAsB,SAASwB,EAAWtL,GAC1E,IAAM1E,EAAOhH,KACbgV,EAAU,CACR,SAACtJ,GAAD,OAAQ1E,EAAK+O,oBAAoBiB,EAAWtL,IAC5C,SAACiN,EAAYjN,GAAb,OAAoB1E,EAAK4R,cAAc,UAAWD,EAAYjN,IAC9D,SAACA,GAAD,OAAQ1E,EAAKmP,iBAAiBa,EAAWtL,KACxCA,IAOLnN,EAAwBgJ,UAAUmO,YAAc,SAASqB,EAAUrL,GACjEA,EAAG,MAAM,IAGXnN,EAAwBgJ,UAAUqR,cAAgB,SAASG,EAAMJ,EAAYjN,GAC3EA,EAAIiN,EAAa,KAAO,IAAIzY,MAAM,eAAe6Y,EAAK,iBAOxDxa,EAAwBgJ,UAAU+Q,sBAAwB,SAASvB,EAAUrL,GAC3E,IAAM1E,EAAOhH,KAGPgZ,EAAQhS,EAAKoQ,oBACb6B,EAAQ,KAAH,OAAQD,EAAM9R,SAAS,KAClCF,EAAKoQ,sBAELpQ,EAAKyE,YAAY,CACf/G,OAAQ,sBACRpC,OAAQ,CAACyU,KACR,SAAS3X,EAAOmP,GACjB,GAAInP,EACF4H,EAAKmQ,gBAAgB8B,GAAS,CAAE7Z,aADlC,CAIA,IAAM8Z,EAAS3K,EAAI5G,OACnBX,EAAKmQ,gBAAgB8B,GAASC,MAGhCxN,EAAG,KAAMuN,IAIX1a,EAAwBgJ,UAAUgR,eAAiB,SAASrB,EAAS3N,EAASmC,GAC5E,IAAM1E,EAAOhH,KAGPgZ,EAAQhS,EAAKoQ,oBACb6B,EAAQ,KAAH,OAAQD,EAAM9R,SAAS,KAClCF,EAAKoQ,sBAELpQ,EAAKyE,YAAY,CACf/G,OAAQ,WACRpC,OAAQ,CAAC4U,EAAS3N,KACjB,SAASnK,EAAOmP,GACjB,GAAInP,EACF4H,EAAKmQ,gBAAgB8B,GAAS,CAAE7Z,aADlC,CAIA,IAAMuI,EAAS4G,EAAI5G,OACnBX,EAAKmQ,gBAAgB8B,GAAStR,MAGhC+D,EAAG,KAAMuN,IAGX1a,EAAwBgJ,UAAUkR,mBAAqB,SAASQ,EAAOvN,GACrE,IACM/D,EADO3H,KACOmX,gBAAgB8B,IAAU,KAE9C,OAAKtR,EAEDA,EAAOvI,MAAcsM,EAAG/D,EAAOvI,YAEnCsM,EAAG,KAAM/D,GAJW+D,EAAG,KAAM,OAW/BnN,EAAwBgJ,UAAU6O,yBAA2B,SAASY,EAAWtL,GAC/E,IAAIyN,EACJ,IACEA,EAAYjE,EAAQkB,yBAAyBY,GAC7C,MAAO5V,GACP,OAAOsK,EAAGtK,GAEZsK,EAAG,KAAMyN,IAOX5a,EAAwBgJ,UAAU+P,oBAAsB,SAASP,EAAUrL,GAGzE,QAAsB7O,IAAlBka,EAASS,KAAoB,OAAO9L,EAAG,IAAIxL,MAAJ,mEAF9BF,KAGRoZ,eAAerC,EAASS,MAAM,SAASpW,EAAKiY,GAC/C,OAAIjY,EAAYsK,EAAGtK,GACdiY,OACL3N,IAD2BA,EAAG,IAAIxL,MAAJ,0EAA6E6W,EAASS,KAAtF,WAKlCjZ,EAAwBgJ,UAAUkQ,gBAAkB,SAAST,EAAWtL,GAEtE,QAAuB7O,IAAnBma,EAAUQ,KAAoB,OAAO9L,EAAG,IAAIxL,MAAJ,+DAD/BF,KAERoZ,eAAepC,EAAUQ,MAAM,SAASpW,EAAKiY,GAChD,OAAIjY,EAAYsK,EAAGtK,GACdiY,OACL3N,IAD2BA,EAAG,IAAIxL,MAAJ,sEAAyE8W,EAAUQ,KAAnF,WAKlCjZ,EAAwBgJ,UAAUsQ,wBAA0B,SAASb,EAAWtL,GAE9E,YAAuB7O,IAAnBma,EAAUQ,KAA2B9L,EAAG,IAAIxL,MAAJ,6EACrBrD,IAAnBma,EAAU7U,KAA2BuJ,EAAG,IAAIxL,MAAJ,mEACvC0W,EAAWI,EAAU7U,WAHbnC,KAIRoZ,eAAepC,EAAUQ,MAAM,SAASpW,EAAKiY,GAChD,OAAIjY,EAAYsK,EAAGtK,GACdiY,OACL3N,IAD2BA,EAAG,IAAIxL,MAAJ,sEAAyE8W,EAAUQ,KAAnF,UAHQ9L,EAAG,IAAIxL,MAAJ,iFAQ7C3B,EAAwBgJ,UAAUuQ,uBAAyB,SAASd,EAAWtL,GAE7E,YAAuB7O,IAAnBma,EAAUQ,KAA2B9L,EAAG,IAAIxL,MAAJ,uEACrBrD,IAAnBma,EAAU7U,KAA2BuJ,EAAG,IAAIxL,MAAJ,6DACvC0W,EAAWI,EAAU7U,WAHbnC,KAIRoZ,eAAepC,EAAUQ,MAAM,SAASpW,EAAKiY,GAChD,OAAIjY,EAAYsK,EAAGtK,GACdiY,OACL3N,IAD2BA,EAAG,IAAIxL,MAAJ,yEAA4E8W,EAAUQ,KAAtF,UAHQ9L,EAAG,IAAIxL,MAAJ,wFAQ7C3B,EAAwBgJ,UAAUyQ,4BAA8B,SAASd,EAASxL,GACnE1L,KAERoZ,eAAelC,GAAS,SAAS9V,EAAKiY,GACzC,OAAIjY,EAAYsK,EAAGtK,GACdiY,OACL3N,IAD2BA,EAAG,IAAIxL,MAAJ,sFAAyFgX,EAAzF,WAKlC3Y,EAAwBgJ,UAAU8Q,qBAAuB,SAASrB,EAAWtL,GAC3E,YAAuB7O,IAAnBma,EAAUQ,KAA2B9L,EAAG,IAAIxL,MAAJ,uEACrBrD,IAAnBma,EAAU7U,KAA2BuJ,EAAG,IAAIxL,MAAJ,+DAC5CF,KAAKoZ,eAAepC,EAAUQ,MAAM,SAASpW,EAAKiY,GAChD,OAAIjY,EAAYsK,EAAGtK,GACdiY,OACL3N,IAD2BA,EAAG,IAAIxL,MAAJ,sEAAyE8W,EAAUQ,KAAnF,WAKlCjZ,EAAwBgJ,UAAU6R,eAAiB,SAASE,EAAe5N,GAGzE,IAAK4N,EAAe,OAAO5N,EAAG,MAAM,GAFvB1L,KAGRrC,aAAY,SAASyD,EAAKiW,GAC7B,GAAIjW,EAAK,OAAOsK,EAAGtK,GACnB,IAAMiY,GAAqF,IAApEhC,EAASxI,IAAI5G,GAAaF,QAAQuR,EAAcrR,eACvEyD,EAAG,KAAM2N,OAQb9a,EAAwBgJ,UAAUsR,oBAAsB,SAAS9B,EAAUrL,GACzE,IAAM1E,EAAOhH,KAGbgH,EAAKsO,UAAUiE,MAAK,WAClBvE,EAAU,CACRhO,EAAKwS,eAAepK,KAAKpI,EAAM+P,GAC/B/P,EAAKpJ,gBAAgBwR,KAAKpI,GAC1BA,EAAKqP,mBAAmBjH,KAAKpI,KAC5B,SAAS5F,EAAK8X,GAEf,GADAlS,EAAKsO,UAAUmE,QACXrY,EAAK,OAAOsK,EAAGtK,GACnBsK,EAAG,KAAMwN,UAKf3a,EAAwBgJ,UAAUuR,WAAa,SAAS/B,EAAUrL,GAChE,IAAM1E,EAAOhH,KAGbgH,EAAKsO,UAAUiE,MAAK,WAClBvE,EAAU,CACRhO,EAAKwS,eAAepK,KAAKpI,EAAM+P,GAC/B/P,EAAKpJ,gBAAgBwR,KAAKpI,KACzB,SAAS5F,EAAKsY,GAEf,GADA1S,EAAKsO,UAAUmE,QACXrY,EAAK,OAAOsK,EAAGtK,GACnBsK,EAAG,KAAM,CAACiO,IAAKD,EAAUE,GAAI7C,WAKnCxY,EAAwBgJ,UAAU8O,mBAAqB,SAASwD,EAAOnO,GACxD1L,KACRyL,YAAY,CACf/G,OAAQ,yBACRpC,OAAQ,CAACuX,KACR,SAASzY,EAAKmN,GACf,GAAInN,EAAK,OAAOsK,EAAGtK,GACnBsK,EAAG,KAAM6C,EAAI5G,YAIjBpJ,EAAwBgJ,UAAU6N,YAAc,SAAS2B,EAAUrL,GAEjE0J,EADapV,KACIkL,OAAQ6L,EAAUrL,IAGrCnN,EAAwBgJ,UAAU+O,YAAc,SAAS5K,GAC1C1L,KACRyL,YAAY,CAAE/G,OAAQ,eAAgBpC,OAAQ,KAAM,SAAUlB,EAAKmN,GACtE,GAAInN,EAAK,OAAOsK,EAAGtK,GACnBsK,EAAG,KAAM6C,EAAI5G,YAIjBpJ,EAAwBgJ,UAAUiS,eAAiB,SAASzC,EAAUrL,GACpE,IAAM1E,EAAOhH,KACPkX,EAAUH,EAASS,KAGnBlL,EAAQ,QAEYzP,IAAtBka,EAAS+C,WAEXxN,EAAMwN,SAAW9S,EAAKsP,YAAYlH,KAAKpI,SAGlBnK,IAAnBka,EAAShH,QAEXzD,EAAMyD,MAAQ/I,EAAKyE,YAAY2D,KAAKpI,EAAM,CAAEtC,OAAQ,0BAA2BpC,OAAQ,CAAC4U,EAAS,mBAG9Era,IAAjBka,EAASgD,MAEXzN,EAAMyN,IAAM/S,EAAKoO,YAAYhG,KAAKpI,EAkBtC,SAAuB+P,GACrB,MAAO,CACLS,KAAMT,EAASS,KACfwC,GAAIjD,EAASiD,GACbrd,MAAOoa,EAASpa,MAChBwF,KAAM4U,EAAS5U,KACf4X,IAAKhD,EAASgD,IACdD,SAAU/C,EAAS+C,SACnB/J,MAAOgH,EAAShH,OA1BwBkK,CAAclD,KAGxD9B,EAAS3I,GAAO,SAASlL,EAAK8Y,GAC5B,GAAI9Y,EAAK,OAAOsK,EAAGtK,GAEnB,IAAMuG,EAAS,GACXuS,EAAYJ,WAAUnS,EAAOmS,SAAWI,EAAYJ,UACpDI,EAAYnK,QAAOpI,EAAOoI,MAAQmK,EAAYnK,MAAMpI,QACpDuS,EAAYH,MAAKpS,EAAOoS,IAAMG,EAAYH,KAE9CrO,EAAG,KAAMxJ,EAAO6U,EAAUpP,S,qBC5oB9B,IAAMoD,EAAgB/N,EAAQ,MAE9B6C,EAAOnD,QASP,SAAqBkC,EAAUmY,EAAUrL,GACvC9M,EAAS+M,UAAUZ,EAAc,CAC/BrG,OAAQ,kBACRpC,OAAQ,CAACyU,MACP,SAAS3V,EAAKmN,GAChB,GAAInN,EAEF,MAAoB,sCAAhBA,EAAImI,QACCmC,EAAG,KAAM,UAETA,EAAGtK,GAGdsK,EAAG,KAAM6C,EAAI5G,a,iDCxBXwS,EAAsBnd,EAAQ,MAC9Bod,EAA4Bpd,EAAQ,MAEpCqd,E,2CACJ,aAAc,8BACN,YAAwC,IAArCnM,EAAqC,EAArCA,aAActP,EAAuB,EAAvBA,SAAUsM,EAAa,EAAbA,OAC/B,EAA+BkP,EAA0B,CAAElM,eAActP,aAAjE0b,EAAR,EAAQA,OAAQrM,EAAhB,EAAgBA,WAIhB,OAFAqM,EAAOpb,GAAG,gBAAgB,SAACiD,GAAD,OAAU+I,EAAOiG,KAAK,OAAQ,KAAMhP,MAEvD8L,K,UAP0BkM,GAYvCta,EAAOnD,QAAU2d,G,iDCfXF,EAAsBnd,EAAQ,MAC9Bud,EAAyBvd,EAAQ,MAEjCqd,E,2CACJ,aAAc,8BACN,YAAwC,IAArCnM,EAAqC,EAArCA,aAActP,EAAuB,EAAvBA,SAAuB,EAAbsM,OAC/B,OAAOqP,EAAuB,CAAErM,eAActP,gB,UAHbub,GAQvCta,EAAOnD,QAAU2d","file":"static/js/1.dbc4b14c.chunk.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.isAsync = undefined;\n\nvar _asyncify = require('../asyncify');\n\nvar _asyncify2 = _interopRequireDefault(_asyncify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar supportsSymbol = typeof Symbol === 'function';\n\nfunction isAsync(fn) {\n    return supportsSymbol && fn[Symbol.toStringTag] === 'AsyncFunction';\n}\n\nfunction wrapAsync(asyncFn) {\n    return isAsync(asyncFn) ? (0, _asyncify2.default)(asyncFn) : asyncFn;\n}\n\nexports.default = wrapAsync;\nexports.isAsync = isAsync;","import 'regenerator-runtime/runtime';\nimport { g as get_store_value, a as app } from './onboard-6d718fff.js';\nimport 'bignumber.js';\nimport 'bnc-sdk';\nimport 'bowser';\nimport Web3ProviderEngine from 'web3-provider-engine';\nimport RpcSource from 'web3-provider-engine/subproviders/rpc';\nimport HookedWalletSubprovider from 'web3-provider-engine/subproviders/hooked-wallet';\nimport SubscriptionSubprovider from 'web3-provider-engine/subproviders/subscriptions';\nimport FilterSubprovider from 'web3-provider-engine/subproviders/filters';\n\nfunction createProvider(config) {\n  var getAccounts = config.getAccounts,\n      signTransaction = config.signTransaction,\n      rpcUrl = config.rpcUrl,\n      processMessage = config.processMessage,\n      processPersonalMessage = config.processPersonalMessage,\n      signMessage = config.signMessage,\n      signPersonalMessage = config.signPersonalMessage;\n  var pollingInterval = get_store_value(app).blockPollingInterval;\n  var idMgmt = getAccounts && new HookedWalletSubprovider({\n    getAccounts: getAccounts,\n    signTransaction: signTransaction,\n    processMessage: processMessage,\n    processPersonalMessage: processPersonalMessage,\n    signMessage: signMessage,\n    signPersonalMessage: signPersonalMessage\n  });\n  var rpcSubProvider = new RpcSource({\n    rpcUrl: rpcUrl.includes('http') ? rpcUrl : \"https://\".concat(rpcUrl)\n  });\n  var provider = new Web3ProviderEngine({\n    pollingInterval: pollingInterval\n  });\n  provider.addProvider(new SubscriptionSubprovider());\n  provider.addProvider(new FilterSubprovider());\n  idMgmt && provider.addProvider(idMgmt);\n  provider.addProvider(rpcSubProvider);\n  provider.start();\n  provider.on('error', console.error);\n  return provider;\n}\n\nexport default createProvider;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = slice;\nfunction slice(arrayLike, start) {\n    start = start | 0;\n    var newLen = Math.max(arrayLike.length - start, 0);\n    var newArr = Array(newLen);\n    for (var idx = 0; idx < newLen; idx++) {\n        newArr[idx] = arrayLike[start + idx];\n    }\n    return newArr;\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = once;\nfunction once(fn) {\n    return function () {\n        if (fn === null) return;\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, arguments);\n    };\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = onlyOnce;\nfunction onlyOnce(fn) {\n    return function () {\n        if (fn === null) throw new Error(\"Callback was already called.\");\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, arguments);\n    };\n}\nmodule.exports = exports[\"default\"];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (coll, iteratee, callback) {\n    var eachOfImplementation = (0, _isArrayLike2.default)(coll) ? eachOfArrayLike : eachOfGeneric;\n    eachOfImplementation(coll, (0, _wrapAsync2.default)(iteratee), callback);\n};\n\nvar _isArrayLike = require('lodash/isArrayLike');\n\nvar _isArrayLike2 = _interopRequireDefault(_isArrayLike);\n\nvar _breakLoop = require('./internal/breakLoop');\n\nvar _breakLoop2 = _interopRequireDefault(_breakLoop);\n\nvar _eachOfLimit = require('./eachOfLimit');\n\nvar _eachOfLimit2 = _interopRequireDefault(_eachOfLimit);\n\nvar _doLimit = require('./internal/doLimit');\n\nvar _doLimit2 = _interopRequireDefault(_doLimit);\n\nvar _noop = require('lodash/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _once = require('./internal/once');\n\nvar _once2 = _interopRequireDefault(_once);\n\nvar _onlyOnce = require('./internal/onlyOnce');\n\nvar _onlyOnce2 = _interopRequireDefault(_onlyOnce);\n\nvar _wrapAsync = require('./internal/wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// eachOf implementation optimized for array-likes\nfunction eachOfArrayLike(coll, iteratee, callback) {\n    callback = (0, _once2.default)(callback || _noop2.default);\n    var index = 0,\n        completed = 0,\n        length = coll.length;\n    if (length === 0) {\n        callback(null);\n    }\n\n    function iteratorCallback(err, value) {\n        if (err) {\n            callback(err);\n        } else if (++completed === length || value === _breakLoop2.default) {\n            callback(null);\n        }\n    }\n\n    for (; index < length; index++) {\n        iteratee(coll[index], index, (0, _onlyOnce2.default)(iteratorCallback));\n    }\n}\n\n// a generic version of eachOf which can handle array, object, and iterator cases.\nvar eachOfGeneric = (0, _doLimit2.default)(_eachOfLimit2.default, Infinity);\n\n/**\n * Like [`each`]{@link module:Collections.each}, except that it passes the key (or index) as the second argument\n * to the iteratee.\n *\n * @name eachOf\n * @static\n * @memberOf module:Collections\n * @method\n * @alias forEachOf\n * @category Collection\n * @see [async.each]{@link module:Collections.each}\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each\n * item in `coll`.\n * The `key` is the item's key, or index in the case of an array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @example\n *\n * var obj = {dev: \"/dev.json\", test: \"/test.json\", prod: \"/prod.json\"};\n * var configs = {};\n *\n * async.forEachOf(obj, function (value, key, callback) {\n *     fs.readFile(__dirname + value, \"utf8\", function (err, data) {\n *         if (err) return callback(err);\n *         try {\n *             configs[key] = JSON.parse(data);\n *         } catch (e) {\n *             return callback(e);\n *         }\n *         callback();\n *     });\n * }, function (err) {\n *     if (err) console.error(err.message);\n *     // configs is now a map of JSON data\n *     doSomethingWith(configs);\n * });\n */\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// A temporary value used to identify if the loop should be broken.\n// See #1064, #1293\nexports.default = {};\nmodule.exports = exports[\"default\"];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _eachOfLimit;\n\nvar _noop = require('lodash/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _once = require('./once');\n\nvar _once2 = _interopRequireDefault(_once);\n\nvar _iterator = require('./iterator');\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _onlyOnce = require('./onlyOnce');\n\nvar _onlyOnce2 = _interopRequireDefault(_onlyOnce);\n\nvar _breakLoop = require('./breakLoop');\n\nvar _breakLoop2 = _interopRequireDefault(_breakLoop);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _eachOfLimit(limit) {\n    return function (obj, iteratee, callback) {\n        callback = (0, _once2.default)(callback || _noop2.default);\n        if (limit <= 0 || !obj) {\n            return callback(null);\n        }\n        var nextElem = (0, _iterator2.default)(obj);\n        var done = false;\n        var running = 0;\n        var looping = false;\n\n        function iterateeCallback(err, value) {\n            running -= 1;\n            if (err) {\n                done = true;\n                callback(err);\n            } else if (value === _breakLoop2.default || done && running <= 0) {\n                done = true;\n                return callback(null);\n            } else if (!looping) {\n                replenish();\n            }\n        }\n\n        function replenish() {\n            looping = true;\n            while (running < limit && !done) {\n                var elem = nextElem();\n                if (elem === null) {\n                    done = true;\n                    if (running <= 0) {\n                        callback(null);\n                    }\n                    return;\n                }\n                running += 1;\n                iteratee(elem.value, elem.key, (0, _onlyOnce2.default)(iterateeCallback));\n            }\n            looping = false;\n        }\n\n        replenish();\n    };\n}\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = doLimit;\nfunction doLimit(fn, limit) {\n    return function (iterable, iteratee, callback) {\n        return fn(iterable, limit, iteratee, callback);\n    };\n}\nmodule.exports = exports[\"default\"];","const getRandomId = require('./random-id.js')\nconst extend = require('xtend')\n\nmodule.exports = createPayload\n\n\nfunction createPayload(data){\n  return extend({\n    // defaults\n    id: getRandomId(),\n    jsonrpc: '2.0',\n    params: [],\n    // user-specified\n  }, data)\n}\n","\"use strict\";\nvar window = require(\"global/window\")\nvar isFunction = require(\"is-function\")\nvar parseHeaders = require(\"parse-headers\")\nvar xtend = require(\"xtend\")\n\nmodule.exports = createXHR\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = createXHR;\ncreateXHR.XMLHttpRequest = window.XMLHttpRequest || noop\ncreateXHR.XDomainRequest = \"withCredentials\" in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest\n\nforEachArray([\"get\", \"put\", \"post\", \"patch\", \"head\", \"delete\"], function(method) {\n    createXHR[method === \"delete\" ? \"del\" : method] = function(uri, options, callback) {\n        options = initParams(uri, options, callback)\n        options.method = method.toUpperCase()\n        return _createXHR(options)\n    }\n})\n\nfunction forEachArray(array, iterator) {\n    for (var i = 0; i < array.length; i++) {\n        iterator(array[i])\n    }\n}\n\nfunction isEmpty(obj){\n    for(var i in obj){\n        if(obj.hasOwnProperty(i)) return false\n    }\n    return true\n}\n\nfunction initParams(uri, options, callback) {\n    var params = uri\n\n    if (isFunction(options)) {\n        callback = options\n        if (typeof uri === \"string\") {\n            params = {uri:uri}\n        }\n    } else {\n        params = xtend(options, {uri: uri})\n    }\n\n    params.callback = callback\n    return params\n}\n\nfunction createXHR(uri, options, callback) {\n    options = initParams(uri, options, callback)\n    return _createXHR(options)\n}\n\nfunction _createXHR(options) {\n    if(typeof options.callback === \"undefined\"){\n        throw new Error(\"callback argument missing\")\n    }\n\n    var called = false\n    var callback = function cbOnce(err, response, body){\n        if(!called){\n            called = true\n            options.callback(err, response, body)\n        }\n    }\n\n    function readystatechange() {\n        if (xhr.readyState === 4) {\n            setTimeout(loadFunc, 0)\n        }\n    }\n\n    function getBody() {\n        // Chrome with requestType=blob throws errors arround when even testing access to responseText\n        var body = undefined\n\n        if (xhr.response) {\n            body = xhr.response\n        } else {\n            body = xhr.responseText || getXml(xhr)\n        }\n\n        if (isJson) {\n            try {\n                body = JSON.parse(body)\n            } catch (e) {}\n        }\n\n        return body\n    }\n\n    function errorFunc(evt) {\n        clearTimeout(timeoutTimer)\n        if(!(evt instanceof Error)){\n            evt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\") )\n        }\n        evt.statusCode = 0\n        return callback(evt, failureResponse)\n    }\n\n    // will load the data & process the response in a special response object\n    function loadFunc() {\n        if (aborted) return\n        var status\n        clearTimeout(timeoutTimer)\n        if(options.useXDR && xhr.status===undefined) {\n            //IE8 CORS GET successful response doesn't have a status field, but body is fine\n            status = 200\n        } else {\n            status = (xhr.status === 1223 ? 204 : xhr.status)\n        }\n        var response = failureResponse\n        var err = null\n\n        if (status !== 0){\n            response = {\n                body: getBody(),\n                statusCode: status,\n                method: method,\n                headers: {},\n                url: uri,\n                rawRequest: xhr\n            }\n            if(xhr.getAllResponseHeaders){ //remember xhr can in fact be XDR for CORS in IE\n                response.headers = parseHeaders(xhr.getAllResponseHeaders())\n            }\n        } else {\n            err = new Error(\"Internal XMLHttpRequest Error\")\n        }\n        return callback(err, response, response.body)\n    }\n\n    var xhr = options.xhr || null\n\n    if (!xhr) {\n        if (options.cors || options.useXDR) {\n            xhr = new createXHR.XDomainRequest()\n        }else{\n            xhr = new createXHR.XMLHttpRequest()\n        }\n    }\n\n    var key\n    var aborted\n    var uri = xhr.url = options.uri || options.url\n    var method = xhr.method = options.method || \"GET\"\n    var body = options.body || options.data\n    var headers = xhr.headers = options.headers || {}\n    var sync = !!options.sync\n    var isJson = false\n    var timeoutTimer\n    var failureResponse = {\n        body: undefined,\n        headers: {},\n        statusCode: 0,\n        method: method,\n        url: uri,\n        rawRequest: xhr\n    }\n\n    if (\"json\" in options && options.json !== false) {\n        isJson = true\n        headers[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\") //Don't override existing accept header declared by user\n        if (method !== \"GET\" && method !== \"HEAD\") {\n            headers[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\") //Don't override existing accept header declared by user\n            body = JSON.stringify(options.json === true ? body : options.json)\n        }\n    }\n\n    xhr.onreadystatechange = readystatechange\n    xhr.onload = loadFunc\n    xhr.onerror = errorFunc\n    // IE9 must have onprogress be set to a unique function.\n    xhr.onprogress = function () {\n        // IE must die\n    }\n    xhr.onabort = function(){\n        aborted = true;\n    }\n    xhr.ontimeout = errorFunc\n    xhr.open(method, uri, !sync, options.username, options.password)\n    //has to be after open\n    if(!sync) {\n        xhr.withCredentials = !!options.withCredentials\n    }\n    // Cannot set timeout with sync request\n    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n    if (!sync && options.timeout > 0 ) {\n        timeoutTimer = setTimeout(function(){\n            if (aborted) return\n            aborted = true//IE9 may still call readystatechange\n            xhr.abort(\"timeout\")\n            var e = new Error(\"XMLHttpRequest timeout\")\n            e.code = \"ETIMEDOUT\"\n            errorFunc(e)\n        }, options.timeout )\n    }\n\n    if (xhr.setRequestHeader) {\n        for(key in headers){\n            if(headers.hasOwnProperty(key)){\n                xhr.setRequestHeader(key, headers[key])\n            }\n        }\n    } else if (options.headers && !isEmpty(options.headers)) {\n        throw new Error(\"Headers cannot be set on an XDomainRequest object\")\n    }\n\n    if (\"responseType\" in options) {\n        xhr.responseType = options.responseType\n    }\n\n    if (\"beforeSend\" in options &&\n        typeof options.beforeSend === \"function\"\n    ) {\n        options.beforeSend(xhr)\n    }\n\n    // Microsoft Edge browser sends \"undefined\" when send is called with undefined value.\n    // XMLHttpRequest spec says to pass null as body to indicate no body\n    // See https://github.com/naugtur/xhr/issues/100.\n    xhr.send(body || null)\n\n    return xhr\n\n\n}\n\nfunction getXml(xhr) {\n    // xhr.responseXML will throw Exception \"InvalidStateError\" or \"DOMException\"\n    // See https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseXML.\n    try {\n        if (xhr.responseType === \"document\") {\n            return xhr.responseXML\n        }\n        var firefoxBugTakenEffect = xhr.responseXML && xhr.responseXML.documentElement.nodeName === \"parsererror\"\n        if (xhr.responseType === \"\" && !firefoxBugTakenEffect) {\n            return xhr.responseXML\n        }\n    } catch (e) {}\n\n    return null\n}\n\nfunction noop() {}\n","var win;\n\nif (typeof window !== \"undefined\") {\n    win = window;\n} else if (typeof global !== \"undefined\") {\n    win = global;\n} else if (typeof self !== \"undefined\"){\n    win = self;\n} else {\n    win = {};\n}\n\nmodule.exports = win;\n","module.exports = isFunction\n\nvar toString = Object.prototype.toString\n\nfunction isFunction (fn) {\n  if (!fn) {\n    return false\n  }\n  var string = toString.call(fn)\n  return string === '[object Function]' ||\n    (typeof fn === 'function' && string !== '[object RegExp]') ||\n    (typeof window !== 'undefined' &&\n     // IE8 and below\n     (fn === window.setTimeout ||\n      fn === window.alert ||\n      fn === window.confirm ||\n      fn === window.prompt))\n};\n","var trim = function(string) {\n  return string.replace(/^\\s+|\\s+$/g, '');\n}\n  , isArray = function(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    }\n\nmodule.exports = function (headers) {\n  if (!headers)\n    return {}\n\n  var result = {}\n\n  var headersArr = trim(headers).split('\\n')\n\n  for (var i = 0; i < headersArr.length; i++) {\n    var row = headersArr[i]\n    var index = row.indexOf(':')\n    , key = trim(row.slice(0, index)).toLowerCase()\n    , value = trim(row.slice(index + 1))\n\n    if (typeof(result[key]) === 'undefined') {\n      result[key] = value\n    } else if (isArray(result[key])) {\n      result[key].push(value)\n    } else {\n      result[key] = [ result[key], value ]\n    }\n  }\n\n  return result\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _doParallel = require('./internal/doParallel');\n\nvar _doParallel2 = _interopRequireDefault(_doParallel);\n\nvar _map = require('./internal/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Produces a new collection of values by mapping each value in `coll` through\n * the `iteratee` function. The `iteratee` is called with an item from `coll`\n * and a callback for when it has finished processing. Each of these callback\n * takes 2 arguments: an `error`, and the transformed item from `coll`. If\n * `iteratee` passes an error to its callback, the main `callback` (for the\n * `map` function) is immediately called with the error.\n *\n * Note, that since this function applies the `iteratee` to each item in\n * parallel, there is no guarantee that the `iteratee` functions will complete\n * in order. However, the results array will be in the same order as the\n * original `coll`.\n *\n * If `map` is passed an Object, the results will be an Array.  The results\n * will roughly be in the order of the original Objects' keys (but this can\n * vary across JavaScript engines).\n *\n * @name map\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with the transformed item.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Results is an Array of the\n * transformed items from the `coll`. Invoked with (err, results).\n * @example\n *\n * async.map(['file1','file2','file3'], fs.stat, function(err, results) {\n *     // results is now an array of stats for each file\n * });\n */\nexports.default = (0, _doParallel2.default)(_map2.default);\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = doParallel;\n\nvar _eachOf = require('../eachOf');\n\nvar _eachOf2 = _interopRequireDefault(_eachOf);\n\nvar _wrapAsync = require('./wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction doParallel(fn) {\n    return function (obj, iteratee, callback) {\n        return fn(_eachOf2.default, obj, (0, _wrapAsync2.default)(iteratee), callback);\n    };\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = eachOfLimit;\n\nvar _eachOfLimit2 = require('./internal/eachOfLimit');\n\nvar _eachOfLimit3 = _interopRequireDefault(_eachOfLimit2);\n\nvar _wrapAsync = require('./internal/wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The same as [`eachOf`]{@link module:Collections.eachOf} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name eachOfLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.eachOf]{@link module:Collections.eachOf}\n * @alias forEachOfLimit\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each\n * item in `coll`. The `key` is the item's key, or index in the case of an\n * array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n */\nfunction eachOfLimit(coll, limit, iteratee, callback) {\n  (0, _eachOfLimit3.default)(limit)(coll, (0, _wrapAsync2.default)(iteratee), callback);\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = iterator;\n\nvar _isArrayLike = require('lodash/isArrayLike');\n\nvar _isArrayLike2 = _interopRequireDefault(_isArrayLike);\n\nvar _getIterator = require('./getIterator');\n\nvar _getIterator2 = _interopRequireDefault(_getIterator);\n\nvar _keys = require('lodash/keys');\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction createArrayIterator(coll) {\n    var i = -1;\n    var len = coll.length;\n    return function next() {\n        return ++i < len ? { value: coll[i], key: i } : null;\n    };\n}\n\nfunction createES2015Iterator(iterator) {\n    var i = -1;\n    return function next() {\n        var item = iterator.next();\n        if (item.done) return null;\n        i++;\n        return { value: item.value, key: i };\n    };\n}\n\nfunction createObjectIterator(obj) {\n    var okeys = (0, _keys2.default)(obj);\n    var i = -1;\n    var len = okeys.length;\n    return function next() {\n        var key = okeys[++i];\n        return i < len ? { value: obj[key], key: key } : null;\n    };\n}\n\nfunction iterator(coll) {\n    if ((0, _isArrayLike2.default)(coll)) {\n        return createArrayIterator(coll);\n    }\n\n    var iterator = (0, _getIterator2.default)(coll);\n    return iterator ? createES2015Iterator(iterator) : createObjectIterator(coll);\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (coll) {\n    return iteratorSymbol && coll[iteratorSymbol] && coll[iteratorSymbol]();\n};\n\nvar iteratorSymbol = typeof Symbol === 'function' && Symbol.iterator;\n\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = asyncify;\n\nvar _isObject = require('lodash/isObject');\n\nvar _isObject2 = _interopRequireDefault(_isObject);\n\nvar _initialParams = require('./internal/initialParams');\n\nvar _initialParams2 = _interopRequireDefault(_initialParams);\n\nvar _setImmediate = require('./internal/setImmediate');\n\nvar _setImmediate2 = _interopRequireDefault(_setImmediate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Take a sync function and make it async, passing its return value to a\n * callback. This is useful for plugging sync functions into a waterfall,\n * series, or other async functions. Any arguments passed to the generated\n * function will be passed to the wrapped function (except for the final\n * callback argument). Errors thrown will be passed to the callback.\n *\n * If the function passed to `asyncify` returns a Promise, that promises's\n * resolved/rejected state will be used to call the callback, rather than simply\n * the synchronous return value.\n *\n * This also means you can asyncify ES2017 `async` functions.\n *\n * @name asyncify\n * @static\n * @memberOf module:Utils\n * @method\n * @alias wrapSync\n * @category Util\n * @param {Function} func - The synchronous function, or Promise-returning\n * function to convert to an {@link AsyncFunction}.\n * @returns {AsyncFunction} An asynchronous wrapper of the `func`. To be\n * invoked with `(args..., callback)`.\n * @example\n *\n * // passing a regular synchronous function\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(JSON.parse),\n *     function (data, next) {\n *         // data is the result of parsing the text.\n *         // If there was a parsing error, it would have been caught.\n *     }\n * ], callback);\n *\n * // passing a function returning a promise\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(function (contents) {\n *         return db.model.create(contents);\n *     }),\n *     function (model, next) {\n *         // `model` is the instantiated model object.\n *         // If there was an error, this function would be skipped.\n *     }\n * ], callback);\n *\n * // es2017 example, though `asyncify` is not needed if your JS environment\n * // supports async functions out of the box\n * var q = async.queue(async.asyncify(async function(file) {\n *     var intermediateStep = await processFile(file);\n *     return await somePromise(intermediateStep)\n * }));\n *\n * q.push(files);\n */\nfunction asyncify(func) {\n    return (0, _initialParams2.default)(function (args, callback) {\n        var result;\n        try {\n            result = func.apply(this, args);\n        } catch (e) {\n            return callback(e);\n        }\n        // if result is Promise object\n        if ((0, _isObject2.default)(result) && typeof result.then === 'function') {\n            result.then(function (value) {\n                invokeCallback(callback, null, value);\n            }, function (err) {\n                invokeCallback(callback, err.message ? err : new Error(err));\n            });\n        } else {\n            callback(null, result);\n        }\n    });\n}\n\nfunction invokeCallback(callback, error, value) {\n    try {\n        callback(error, value);\n    } catch (e) {\n        (0, _setImmediate2.default)(rethrow, e);\n    }\n}\n\nfunction rethrow(error) {\n    throw error;\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (fn) {\n    return function () /*...args, callback*/{\n        var args = (0, _slice2.default)(arguments);\n        var callback = args.pop();\n        fn.call(this, args, callback);\n    };\n};\n\nvar _slice = require('./slice');\n\nvar _slice2 = _interopRequireDefault(_slice);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.hasNextTick = exports.hasSetImmediate = undefined;\nexports.fallback = fallback;\nexports.wrap = wrap;\n\nvar _slice = require('./slice');\n\nvar _slice2 = _interopRequireDefault(_slice);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar hasSetImmediate = exports.hasSetImmediate = typeof setImmediate === 'function' && setImmediate;\nvar hasNextTick = exports.hasNextTick = typeof process === 'object' && typeof process.nextTick === 'function';\n\nfunction fallback(fn) {\n    setTimeout(fn, 0);\n}\n\nfunction wrap(defer) {\n    return function (fn /*, ...args*/) {\n        var args = (0, _slice2.default)(arguments, 1);\n        defer(function () {\n            fn.apply(null, args);\n        });\n    };\n}\n\nvar _defer;\n\nif (hasSetImmediate) {\n    _defer = setImmediate;\n} else if (hasNextTick) {\n    _defer = process.nextTick;\n} else {\n    _defer = fallback;\n}\n\nexports.default = wrap(_defer);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _asyncMap;\n\nvar _noop = require('lodash/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _wrapAsync = require('./wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncMap(eachfn, arr, iteratee, callback) {\n    callback = callback || _noop2.default;\n    arr = arr || [];\n    var results = [];\n    var counter = 0;\n    var _iteratee = (0, _wrapAsync2.default)(iteratee);\n\n    eachfn(arr, function (value, _, callback) {\n        var index = counter++;\n        _iteratee(value, function (err, v) {\n            results[index] = v;\n            callback(err);\n        });\n    }, function (err) {\n        callback(err, results);\n    });\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _eachLimit = require('./eachLimit');\n\nvar _eachLimit2 = _interopRequireDefault(_eachLimit);\n\nvar _doLimit = require('./internal/doLimit');\n\nvar _doLimit2 = _interopRequireDefault(_doLimit);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The same as [`each`]{@link module:Collections.each} but runs only a single async operation at a time.\n *\n * @name eachSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.each]{@link module:Collections.each}\n * @alias forEachSeries\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each\n * item in `coll`.\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOfSeries`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n */\nexports.default = (0, _doLimit2.default)(_eachLimit2.default, 1);\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = eachLimit;\n\nvar _eachOfLimit = require('./internal/eachOfLimit');\n\nvar _eachOfLimit2 = _interopRequireDefault(_eachOfLimit);\n\nvar _withoutIndex = require('./internal/withoutIndex');\n\nvar _withoutIndex2 = _interopRequireDefault(_withoutIndex);\n\nvar _wrapAsync = require('./internal/wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The same as [`each`]{@link module:Collections.each} but runs a maximum of `limit` async operations at a time.\n *\n * @name eachLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.each]{@link module:Collections.each}\n * @alias forEachLimit\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOfLimit`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n */\nfunction eachLimit(coll, limit, iteratee, callback) {\n  (0, _eachOfLimit2.default)(limit)(coll, (0, _withoutIndex2.default)((0, _wrapAsync2.default)(iteratee)), callback);\n}\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _withoutIndex;\nfunction _withoutIndex(iteratee) {\n    return function (value, index, callback) {\n        return iteratee(value, callback);\n    };\n}\nmodule.exports = exports[\"default\"];","const createPayload = require('../util/create-payload.js')\n\nmodule.exports = SubProvider\n\n// this is the base class for a subprovider -- mostly helpers\n\n\nfunction SubProvider() {\n\n}\n\nSubProvider.prototype.setEngine = function(engine) {\n  const self = this\n  if (self.engine) return\n  self.engine = engine\n  engine.on('block', function(block) {\n    self.currentBlock = block\n  })\n\n  engine.on('start', function () {\n    self.start()\n  })\n\n  engine.on('stop', function () {\n    self.stop()\n  })\n}\n\nSubProvider.prototype.handleRequest = function(payload, next, end) {\n  throw new Error('Subproviders should override `handleRequest`.')\n}\n\nSubProvider.prototype.emitPayload = function(payload, cb){\n  const self = this\n  self.engine.sendAsync(createPayload(payload), cb)\n}\n\n// dummies for overriding\n\nSubProvider.prototype.stop = function () {}\n\nSubProvider.prototype.start = function () {}\n","\nconst safeStringify = require('fast-safe-stringify')\n\n/**\n * @class JsonRpcError\n * Error subclass implementing JSON RPC 2.0 errors and Ethereum RPC errors\n * per EIP 1474.\n * Permits any integer error code.\n */\nclass EthereumRpcError extends Error {\n\n  /**\n   * Create an Ethereum JSON RPC error.\n   * \n   * @param {number} code - The integer error code.\n   * @param {string} message - The string message.\n   * @param {any} [data] - The error data.\n   */\n  constructor (code, message, data) {\n\n    if (!Number.isInteger(code)) throw new Error(\n      '\"code\" must be an integer.'\n    )\n    if (!message || typeof message !== 'string') throw new Error(\n      '\"message\" must be a nonempty string.'\n    )\n\n    super(message)\n    this.code = code\n    if (data !== undefined) this.data = data\n  }\n\n  /**\n   * Returns a plain object with all public class properties.\n   * \n   * @returns {object} The serialized error. \n   */\n  serialize() {\n    const serialized = {\n      code: this.code,\n      message: this.message,\n    }\n    if (this.data !== undefined) serialized.data = this.data\n    if (this.stack) serialized.stack = this.stack\n    return serialized\n  }\n\n  /**\n   * Return a string representation of the serialized error, omitting\n   * any circular references.\n   * \n   * @returns {string} The serialized error as a string.\n   */\n  toString() {\n    return safeStringify(\n      this.serialize(),\n      stringifyReplacer,\n      2\n    )\n  }\n}\n\n/**\n * @class EthereumRpcError\n * Error subclass implementing Ethereum Provider errors per EIP 1193.\n * Permits integer error codes in the [ 1000 <= 4999 ] range.\n */\nclass EthereumProviderError extends EthereumRpcError {\n\n  /**\n   * Create an Ethereum JSON RPC error.\n   * \n   * @param {number} code - The integer error code, in the [ 1000 <= 4999 ] range.\n   * @param {string} message - The string message.\n   * @param {any} [data] - The error data.\n   */\n  constructor(code, message, data) {\n\n    if (!isValidEthProviderCode(code)) {\n      throw new Error(\n        '\"code\" must be an integer such that: 1000 <= code <= 4999'\n      )\n    }\n\n    super(code, message, data)\n  }\n}\n\n// Internal\n\nfunction isValidEthProviderCode(code) {\n  return Number.isInteger(code) && code >= 1000 && code <= 4999\n}\n\nfunction stringifyReplacer(_, value) {\n  if (value === '[Circular]') {\n    return\n  }\n  return value\n}\n\n// Exports\n\nmodule.exports =  {\n  EthereumRpcError,\n  EthereumProviderError\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (tasks, callback) {\n    callback = (0, _once2.default)(callback || _noop2.default);\n    if (!(0, _isArray2.default)(tasks)) return callback(new Error('First argument to waterfall must be an array of functions'));\n    if (!tasks.length) return callback();\n    var taskIndex = 0;\n\n    function nextTask(args) {\n        var task = (0, _wrapAsync2.default)(tasks[taskIndex++]);\n        args.push((0, _onlyOnce2.default)(next));\n        task.apply(null, args);\n    }\n\n    function next(err /*, ...args*/) {\n        if (err || taskIndex === tasks.length) {\n            return callback.apply(null, arguments);\n        }\n        nextTask((0, _slice2.default)(arguments, 1));\n    }\n\n    nextTask([]);\n};\n\nvar _isArray = require('lodash/isArray');\n\nvar _isArray2 = _interopRequireDefault(_isArray);\n\nvar _noop = require('lodash/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _once = require('./internal/once');\n\nvar _once2 = _interopRequireDefault(_once);\n\nvar _slice = require('./internal/slice');\n\nvar _slice2 = _interopRequireDefault(_slice);\n\nvar _onlyOnce = require('./internal/onlyOnce');\n\nvar _onlyOnce2 = _interopRequireDefault(_onlyOnce);\n\nvar _wrapAsync = require('./internal/wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = exports['default'];\n\n/**\n * Runs the `tasks` array of functions in series, each passing their results to\n * the next in the array. However, if any of the `tasks` pass an error to their\n * own callback, the next function is not executed, and the main `callback` is\n * immediately called with the error.\n *\n * @name waterfall\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array} tasks - An array of [async functions]{@link AsyncFunction}\n * to run.\n * Each function should complete with any number of `result` values.\n * The `result` values will be passed as arguments, in order, to the next task.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed. This will be passed the results of the last task's\n * callback. Invoked with (err, [results]).\n * @returns undefined\n * @example\n *\n * async.waterfall([\n *     function(callback) {\n *         callback(null, 'one', 'two');\n *     },\n *     function(arg1, arg2, callback) {\n *         // arg1 now equals 'one' and arg2 now equals 'two'\n *         callback(null, 'three');\n *     },\n *     function(arg1, callback) {\n *         // arg1 now equals 'three'\n *         callback(null, 'done');\n *     }\n * ], function (err, result) {\n *     // result now equals 'done'\n * });\n *\n * // Or, with named functions:\n * async.waterfall([\n *     myFirstFunction,\n *     mySecondFunction,\n *     myLastFunction,\n * ], function (err, result) {\n *     // result now equals 'done'\n * });\n * function myFirstFunction(callback) {\n *     callback(null, 'one', 'two');\n * }\n * function mySecondFunction(arg1, arg2, callback) {\n *     // arg1 now equals 'one' and arg2 now equals 'two'\n *     callback(null, 'three');\n * }\n * function myLastFunction(arg1, callback) {\n *     // arg1 now equals 'three'\n *     callback(null, 'done');\n * }\n */","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = parallelLimit;\n\nvar _eachOf = require('./eachOf');\n\nvar _eachOf2 = _interopRequireDefault(_eachOf);\n\nvar _parallel = require('./internal/parallel');\n\nvar _parallel2 = _interopRequireDefault(_parallel);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Run the `tasks` collection of functions in parallel, without waiting until\n * the previous function has completed. If any of the functions pass an error to\n * its callback, the main `callback` is immediately called with the value of the\n * error. Once the `tasks` have completed, the results are passed to the final\n * `callback` as an array.\n *\n * **Note:** `parallel` is about kicking-off I/O tasks in parallel, not about\n * parallel execution of code.  If your tasks do not use any timers or perform\n * any I/O, they will actually be executed in series.  Any synchronous setup\n * sections for each task will happen one after the other.  JavaScript remains\n * single-threaded.\n *\n * **Hint:** Use [`reflect`]{@link module:Utils.reflect} to continue the\n * execution of other tasks when a task fails.\n *\n * It is also possible to use an object instead of an array. Each property will\n * be run as a function and the results will be passed to the final `callback`\n * as an object instead of an array. This can be a more readable way of handling\n * results from {@link async.parallel}.\n *\n * @name parallel\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|Object} tasks - A collection of\n * [async functions]{@link AsyncFunction} to run.\n * Each async function can complete with any number of optional `result` values.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed successfully. This function gets a results array\n * (or object) containing all the result arguments passed to the task callbacks.\n * Invoked with (err, results).\n *\n * @example\n * async.parallel([\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ],\n * // optional callback\n * function(err, results) {\n *     // the results array will equal ['one','two'] even though\n *     // the second function had a shorter timeout.\n * });\n *\n * // an example using an object instead of an array\n * async.parallel({\n *     one: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 1);\n *         }, 200);\n *     },\n *     two: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 2);\n *         }, 100);\n *     }\n * }, function(err, results) {\n *     // results is now equals to: {one: 1, two: 2}\n * });\n */\nfunction parallelLimit(tasks, callback) {\n  (0, _parallel2.default)(_eachOf2.default, tasks, callback);\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _parallel;\n\nvar _noop = require('lodash/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _isArrayLike = require('lodash/isArrayLike');\n\nvar _isArrayLike2 = _interopRequireDefault(_isArrayLike);\n\nvar _slice = require('./slice');\n\nvar _slice2 = _interopRequireDefault(_slice);\n\nvar _wrapAsync = require('./wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _parallel(eachfn, tasks, callback) {\n    callback = callback || _noop2.default;\n    var results = (0, _isArrayLike2.default)(tasks) ? [] : {};\n\n    eachfn(tasks, function (task, key, callback) {\n        (0, _wrapAsync2.default)(task)(function (err, result) {\n            if (arguments.length > 2) {\n                result = (0, _slice2.default)(arguments, 1);\n            }\n            results[key] = result;\n            callback(err);\n        });\n    }, function (err) {\n        callback(err, results);\n    });\n}\nmodule.exports = exports['default'];","\nconst errorValues = require('./errorValues.json')\nconst FALLBACK_ERROR_CODE = require('./errorCodes.json').rpc.internal\nconst { EthereumRpcError } = require('./classes')\n\nconst JSON_RPC_SERVER_ERROR_MESSAGE = 'Unspecified server error.'\n\nconst FALLBACK_MESSAGE = 'Unspecified error message. This is a bug, please report it.'\n\nconst FALLBACK_ERROR = {\n  code: FALLBACK_ERROR_CODE,\n  message: getMessageFromCode(FALLBACK_ERROR_CODE)\n}\n\n/**\n * Gets the message for a given code, or a fallback message if the code has\n * no corresponding message.\n * \n * @param {number} code - The integer error code\n * @param {string} fallbackMessage - The fallback message\n * @return {string} The corresponding message or the fallback message\n */\nfunction getMessageFromCode(code, fallbackMessage = FALLBACK_MESSAGE) {\n\n  if (Number.isInteger(code)) {\n\n    const codeString = code.toString()\n    if (errorValues[codeString]) return errorValues[codeString].message\n\n    if (isJsonRpcServerError(code)) return JSON_RPC_SERVER_ERROR_MESSAGE\n\n    // TODO: allow valid codes and messages to be extended\n    // // EIP 1193 Status Codes\n    // if (code >= 4000 && code <= 4999) return Something?\n  }\n  return fallbackMessage\n}\n\n/**\n * Returns whether the given code is valid.\n * A code is only valid if it has a message.\n * \n * @param {number} code - The code to check\n * @return {boolean} true if the code is valid, false otherwise.\n */\nfunction isValidCode(code) {\n\n  if (!Number.isInteger(code)) return false\n\n  const codeString = code.toString()\n  if (errorValues[codeString]) return true\n\n  if (isJsonRpcServerError(code)) return true\n\n  // TODO: allow valid codes and messages to be extended\n  // // EIP 1193 Status Codes\n  // if (code >= 4000 && code <= 4999) return true\n\n  return false\n}\n\n/**\n * Serializes the given error to an Ethereum JSON RPC-compatible error object.\n * Merely copies the given error's values if it is already compatible.\n * If the given error is not fully compatible, it will be preserved on the\n * returned object's data.originalError property.\n * Adds a 'stack' property if it exists on the given error.\n *\n * @param {any} error - The error to serialize.\n * @param {object} fallbackError - The custom fallback error values if the\n * given error is invalid.\n * @return {object} A standardized error object.\n */\nfunction serializeError (error, fallbackError = FALLBACK_ERROR) {\n\n  if (\n    !fallbackError || \n    !Number.isInteger(fallbackError.code) ||\n    typeof fallbackError.message !== 'string'\n  ) {\n    throw new Error(\n      'fallbackError must contain integer number code and string message.'\n    )\n  }\n\n  if (error instanceof EthereumRpcError) {\n    return error.serialize()\n  }\n\n  const serialized = {}\n\n  if (error && isValidCode(error.code)) {\n\n    serialized.code = error.code\n\n    if (error.message && typeof error.message === 'string') {\n      serialized.message = error.message\n      if (error.hasOwnProperty('data')) serialized.data = error.data\n    } else {\n      serialized.message = getMessageFromCode(serialized.code)\n      serialized.data = { originalError: assignOriginalError(error) }\n    }\n\n  } else {\n    serialized.code = fallbackError.code\n    serialized.message = (\n      error && error.message\n        ? error.message\n        : fallbackError.message\n    )\n    serialized.data = { originalError: assignOriginalError(error) }\n  }\n\n  if (error && error.stack) serialized.stack = error.stack\n  return serialized\n}\n\n// Internal\n\nfunction isJsonRpcServerError (code) {\n  return code >= -32099 && code <= -32000\n}\n\nfunction assignOriginalError (error) {\n  if (error && typeof error === 'object' && !Array.isArray(error)) {\n    return Object.assign({}, error)\n  }\n  return error\n}\n\n// Exports\n\nmodule.exports = {\n  getMessageFromCode,\n  isValidCode,\n  serializeError,\n  JSON_RPC_SERVER_ERROR_MESSAGE,\n}\n","const Subprovider = require('./subprovider.js')\n\n// wraps a json-rpc-engine middleware in a subprovider interface\n\nclass JsonRpcEngineMiddlewareSubprovider extends Subprovider {\n\n  // take a constructorFn to call once we have a reference to the engine\n  constructor (constructorFn) {\n    super()\n    if (!constructorFn) throw new Error('JsonRpcEngineMiddlewareSubprovider - no constructorFn specified')\n    this._constructorFn = constructorFn\n  }\n\n  // this is called once the subprovider has been added to the provider engine\n  setEngine (engine) {\n    if (this.middleware) throw new Error('JsonRpcEngineMiddlewareSubprovider - subprovider added to engine twice')\n    const blockTracker = engine._blockTracker\n    const middleware = this._constructorFn({ engine, provider: engine, blockTracker })\n    if (!middleware) throw new Error('JsonRpcEngineMiddlewareSubprovider - _constructorFn did not return middleware')\n    if (typeof middleware !== 'function') throw new Error('JsonRpcEngineMiddlewareSubprovider - specified middleware is not a function')\n    this.middleware = middleware\n  }\n\n  handleRequest (req, provEngNext, provEngEnd) {\n    const res = { id: req.id }\n    this.middleware(req, res, middlewareNext, middlewareEnd)\n\n    function middlewareNext (handler) {\n      provEngNext((err, result, cb) => {\n        // update response object with result or error\n        if (err) {\n          delete res.result\n          res.error = { message: err.message || err }\n        } else {\n          res.result = result\n        }\n        // call middleware's next handler (even if error)\n        if (handler) {\n          handler(cb)\n        } else {\n          cb()\n        }\n      })\n    }\n\n    function middlewareEnd (err) {\n      if (err) return provEngEnd(err)\n      provEngEnd(null, res.result)\n    }\n  }\n\n}\n\nmodule.exports = JsonRpcEngineMiddlewareSubprovider\n","const EventEmitter = require('events').EventEmitter\nconst inherits = require('util').inherits\nconst ethUtil = require('ethereumjs-util')\nconst EthBlockTracker = require('eth-block-tracker')\nconst map = require('async/map')\nconst eachSeries = require('async/eachSeries')\nconst Stoplight = require('./util/stoplight.js')\nconst cacheUtils = require('./util/rpc-cache-utils.js')\nconst createPayload = require('./util/create-payload.js')\nconst noop = function(){}\n\nmodule.exports = Web3ProviderEngine\n\n\ninherits(Web3ProviderEngine, EventEmitter)\n\nfunction Web3ProviderEngine(opts) {\n  const self = this\n  EventEmitter.call(self)\n  self.setMaxListeners(30)\n  // parse options\n  opts = opts || {}\n\n  // block polling\n  const directProvider = { sendAsync: self._handleAsync.bind(self) }\n  const blockTrackerProvider = opts.blockTrackerProvider || directProvider\n  self._blockTracker = opts.blockTracker || new EthBlockTracker({\n    provider: blockTrackerProvider,\n    pollingInterval: opts.pollingInterval || 4000,\n    setSkipCacheFlag: true,\n  })\n\n  // set initialization blocker\n  self._ready = new Stoplight()\n\n  // local state\n  self.currentBlock = null\n  self._providers = []\n}\n\n// public\n\nWeb3ProviderEngine.prototype.start = function(cb = noop){\n  const self = this\n\n  // trigger start\n  self._ready.go()\n\n  // on new block, request block body and emit as events\n  self._blockTracker.on('latest', (blockNumber) => {\n    // get block body\n    self._getBlockByNumberWithRetry(blockNumber, (err, block) => {\n      if (err) {\n        this.emit('error', err)\n        return\n      }\n      if (!block) {\n        console.log(block)\n        this.emit('error', new Error(\"Could not find block\"))\n        return\n      }\n      const bufferBlock = toBufferBlock(block)\n      // set current + emit \"block\" event\n      self._setCurrentBlock(bufferBlock)\n      // emit other events\n      self.emit('rawBlock', block)\n      self.emit('latest', block)\n    })\n  })\n\n  // forward other events\n  self._blockTracker.on('sync', self.emit.bind(self, 'sync'))\n  self._blockTracker.on('error', self.emit.bind(self, 'error'))\n\n  // update state\n  self._running = true\n  // signal that we started\n  self.emit('start')\n}\n\nWeb3ProviderEngine.prototype.stop = function(){\n  const self = this\n  // stop block polling by removing event listeners\n  self._blockTracker.removeAllListeners()\n  // update state\n  self._running = false\n  // signal that we stopped\n  self.emit('stop')\n}\n\nWeb3ProviderEngine.prototype.isRunning = function(){\n  const self = this\n  return self._running\n}\n\nWeb3ProviderEngine.prototype.addProvider = function(source, index){\n  const self = this\n  if (typeof index === 'number') {\n    self._providers.splice(index, 0, source)\n  } else {\n    self._providers.push(source)\n  }\n  source.setEngine(this)\n}\n\nWeb3ProviderEngine.prototype.removeProvider = function(source){\n  const self = this\n  const index = self._providers.indexOf(source)\n  if (index < 0) throw new Error('Provider not found.')\n  self._providers.splice(index, 1)\n}\n\nWeb3ProviderEngine.prototype.send = function(payload){\n  throw new Error('Web3ProviderEngine does not support synchronous requests.')\n}\n\nWeb3ProviderEngine.prototype.sendAsync = function(payload, cb){\n  const self = this\n  self._ready.await(function(){\n\n    if (Array.isArray(payload)) {\n      // handle batch\n      map(payload, self._handleAsync.bind(self), cb)\n    } else {\n      // handle single\n      self._handleAsync(payload, cb)\n    }\n\n  })\n}\n\n// private\n\nWeb3ProviderEngine.prototype._getBlockByNumberWithRetry = function(blockNumber, cb) {\n  const self = this\n\n  let retriesRemaining = 5\n\n  attemptRequest()\n  return\n\n  function attemptRequest () {\n    self._getBlockByNumber(blockNumber, afterRequest)\n  }\n\n  function afterRequest (err, block) {\n    // anomalous error occurred\n    if (err) return cb(err)\n    // block not ready yet\n    if (!block) {\n      if (retriesRemaining > 0) {\n        // wait 1s then try again\n        retriesRemaining--\n        setTimeout(function () {\n          attemptRequest()\n        }, 1000)\n        return\n      } else {\n        // give up, return a null block\n        cb(null, null)\n        return\n      }\n    }\n    // otherwise return result\n    cb(null, block)\n    return\n  }\n}\n\n\nWeb3ProviderEngine.prototype._getBlockByNumber = function(blockNumber, cb) {\n  const req = createPayload({ method: 'eth_getBlockByNumber', params: [blockNumber, false], skipCache: true })\n  this._handleAsync(req, (err, res) => {\n    if (err) return cb(err)\n    return cb(null, res.result)\n  })\n}\n\nWeb3ProviderEngine.prototype._handleAsync = function(payload, finished) {\n  var self = this\n  var currentProvider = -1\n  var result = null\n  var error = null\n\n  var stack = []\n\n  next()\n\n  function next(after) {\n    currentProvider += 1\n    stack.unshift(after)\n\n    // Bubbled down as far as we could go, and the request wasn't\n    // handled. Return an error.\n    if (currentProvider >= self._providers.length) {\n      end(new Error('Request for method \"' + payload.method + '\" not handled by any subprovider. Please check your subprovider configuration to ensure this method is handled.'))\n    } else {\n      try {\n        var provider = self._providers[currentProvider]\n        provider.handleRequest(payload, next, end)\n      } catch (e) {\n        end(e)\n      }\n    }\n  }\n\n  function end(_error, _result) {\n    error = _error\n    result = _result\n\n    eachSeries(stack, function(fn, callback) {\n\n      if (fn) {\n        fn(error, result, callback)\n      } else {\n        callback()\n      }\n    }, function() {\n\n      var resultObj = {\n        id: payload.id,\n        jsonrpc: payload.jsonrpc,\n        result: result\n      }\n\n      if (error != null) {\n        resultObj.error = {\n          message: error.stack || error.message || error,\n          code: -32000\n        }\n        // respond with both error formats\n        finished(error, resultObj)\n      } else {\n        finished(null, resultObj)\n      }\n    })\n  }\n}\n\n//\n// from remote-data\n//\n\nWeb3ProviderEngine.prototype._setCurrentBlock = function(block){\n  const self = this\n  self.currentBlock = block\n  self.emit('block', block)\n}\n\n// util\n\nfunction toBufferBlock (jsonBlock) {\n  return {\n    number:           ethUtil.toBuffer(jsonBlock.number),\n    hash:             ethUtil.toBuffer(jsonBlock.hash),\n    parentHash:       ethUtil.toBuffer(jsonBlock.parentHash),\n    nonce:            ethUtil.toBuffer(jsonBlock.nonce),\n    mixHash:          ethUtil.toBuffer(jsonBlock.mixHash),\n    sha3Uncles:       ethUtil.toBuffer(jsonBlock.sha3Uncles),\n    logsBloom:        ethUtil.toBuffer(jsonBlock.logsBloom),\n    transactionsRoot: ethUtil.toBuffer(jsonBlock.transactionsRoot),\n    stateRoot:        ethUtil.toBuffer(jsonBlock.stateRoot),\n    receiptsRoot:     ethUtil.toBuffer(jsonBlock.receiptRoot || jsonBlock.receiptsRoot),\n    miner:            ethUtil.toBuffer(jsonBlock.miner),\n    difficulty:       ethUtil.toBuffer(jsonBlock.difficulty),\n    totalDifficulty:  ethUtil.toBuffer(jsonBlock.totalDifficulty),\n    size:             ethUtil.toBuffer(jsonBlock.size),\n    extraData:        ethUtil.toBuffer(jsonBlock.extraData),\n    gasLimit:         ethUtil.toBuffer(jsonBlock.gasLimit),\n    gasUsed:          ethUtil.toBuffer(jsonBlock.gasUsed),\n    timestamp:        ethUtil.toBuffer(jsonBlock.timestamp),\n    transactions:     jsonBlock.transactions,\n  }\n}\n","const EventEmitter = require('events').EventEmitter\nconst inherits = require('util').inherits\n\nmodule.exports = Stoplight\n\n\ninherits(Stoplight, EventEmitter)\n\nfunction Stoplight(){\n  const self = this\n  EventEmitter.call(self)\n  self.isLocked = true\n}\n\nStoplight.prototype.go = function(){\n  const self = this\n  self.isLocked = false\n  self.emit('unlock')\n}\n\nStoplight.prototype.stop = function(){\n  const self = this\n  self.isLocked = true\n  self.emit('lock')\n}\n\nStoplight.prototype.await = function(fn){\n  const self = this\n  if (self.isLocked) {\n    self.once('unlock', fn)\n  } else {\n    setTimeout(fn)\n  }\n}","const stringify = require('json-stable-stringify')\n\nmodule.exports = {\n  cacheIdentifierForPayload: cacheIdentifierForPayload,\n  canCache: canCache,\n  blockTagForPayload: blockTagForPayload,\n  paramsWithoutBlockTag: paramsWithoutBlockTag,\n  blockTagParamIndex: blockTagParamIndex,\n  cacheTypeForPayload: cacheTypeForPayload,\n}\n\nfunction cacheIdentifierForPayload(payload, opts = {}){\n  if (!canCache(payload)) return null\n  const { includeBlockRef } = opts\n  const params = includeBlockRef ? payload.params : paramsWithoutBlockTag(payload)\n  return payload.method + ':' + stringify(params)\n}\n\nfunction canCache(payload){\n  return cacheTypeForPayload(payload) !== 'never'\n}\n\nfunction blockTagForPayload(payload){\n  var index = blockTagParamIndex(payload);\n\n  // Block tag param not passed.\n  if (index >= payload.params.length) {\n    return null;\n  }\n\n  return payload.params[index];\n}\n\nfunction paramsWithoutBlockTag(payload){\n  var index = blockTagParamIndex(payload);\n\n  // Block tag param not passed.\n  if (index >= payload.params.length) {\n    return payload.params;\n  }\n\n  // eth_getBlockByNumber has the block tag first, then the optional includeTx? param\n  if (payload.method === 'eth_getBlockByNumber') {\n    return payload.params.slice(1);\n  }\n\n  return payload.params.slice(0,index);\n}\n\nfunction blockTagParamIndex(payload){\n  switch(payload.method) {\n    // blockTag is third param\n    case 'eth_getStorageAt':\n      return 2\n    // blockTag is second param\n    case 'eth_getBalance':\n    case 'eth_getCode':\n    case 'eth_getTransactionCount':\n    case 'eth_call':\n    case 'eth_estimateGas':\n      return 1\n    // blockTag is first param\n    case 'eth_getBlockByNumber':\n      return 0\n    // there is no blockTag\n    default:\n      return undefined\n  }\n}\n\nfunction cacheTypeForPayload(payload) {\n  switch (payload.method) {\n    // cache permanently\n    case 'web3_clientVersion':\n    case 'web3_sha3':\n    case 'eth_protocolVersion':\n    case 'eth_getBlockTransactionCountByHash':\n    case 'eth_getUncleCountByBlockHash':\n    case 'eth_getCode':\n    case 'eth_getBlockByHash':\n    case 'eth_getTransactionByHash':\n    case 'eth_getTransactionByBlockHashAndIndex':\n    case 'eth_getTransactionReceipt':\n    case 'eth_getUncleByBlockHashAndIndex':\n    case 'eth_getCompilers':\n    case 'eth_compileLLL':\n    case 'eth_compileSolidity':\n    case 'eth_compileSerpent':\n    case 'shh_version':\n      return 'perma'\n\n    // cache until fork\n    case 'eth_getBlockByNumber':\n    case 'eth_getBlockTransactionCountByNumber':\n    case 'eth_getUncleCountByBlockNumber':\n    case 'eth_getTransactionByBlockNumberAndIndex':\n    case 'eth_getUncleByBlockNumberAndIndex':\n      return 'fork'\n\n    // cache for block\n    case 'eth_gasPrice':\n    case 'eth_getBalance':\n    case 'eth_getStorageAt':\n    case 'eth_getTransactionCount':\n    case 'eth_call':\n    case 'eth_estimateGas':\n    case 'eth_getFilterLogs':\n    case 'eth_getLogs':\n    case 'eth_blockNumber':\n      return 'block'\n\n    // never cache\n    case 'net_version':\n    case 'net_peerCount':\n    case 'net_listening':\n    case 'eth_syncing':\n    case 'eth_sign':\n    case 'eth_coinbase':\n    case 'eth_mining':\n    case 'eth_hashrate':\n    case 'eth_accounts':\n    case 'eth_sendTransaction':\n    case 'eth_sendRawTransaction':\n    case 'eth_newFilter':\n    case 'eth_newBlockFilter':\n    case 'eth_newPendingTransactionFilter':\n    case 'eth_uninstallFilter':\n    case 'eth_getFilterChanges':\n    case 'eth_getWork':\n    case 'eth_submitWork':\n    case 'eth_submitHashrate':\n    case 'db_putString':\n    case 'db_getString':\n    case 'db_putHex':\n    case 'db_getHex':\n    case 'shh_post':\n    case 'shh_newIdentity':\n    case 'shh_hasIdentity':\n    case 'shh_newGroup':\n    case 'shh_addToGroup':\n    case 'shh_newFilter':\n    case 'shh_uninstallFilter':\n    case 'shh_getFilterChanges':\n    case 'shh_getMessages':\n      return 'never'\n  }\n}\n","module.exports = createRandomId\n\n\nfunction createRandomId () {\n  // random id\n  return Math.floor(Number.MAX_SAFE_INTEGER * Math.random())\n}","const xhr = process.browser ? require('xhr') : require('request')\nconst inherits = require('util').inherits\nconst createPayload = require('../util/create-payload.js')\nconst Subprovider = require('./subprovider.js')\nconst { ethErrors, serializeError } = require('eth-json-rpc-errors')\n\n\nmodule.exports = RpcSource\n\ninherits(RpcSource, Subprovider)\n\nfunction RpcSource(opts) {\n  const self = this\n  self.rpcUrl = opts.rpcUrl\n}\n\nRpcSource.prototype.handleRequest = function(payload, next, end){\n  const self = this\n  const targetUrl = self.rpcUrl\n\n  // overwrite id to conflict with other concurrent users\n  const sanitizedPayload = sanitizePayload(payload)\n  const newPayload = createPayload(sanitizedPayload)\n\n  xhr({\n    uri: targetUrl,\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(newPayload),\n    rejectUnauthorized: false,\n    timeout: 20000,\n  }, function(err, res, body) {\n    if (err) return end(serializeError(err))\n\n    // check for error code\n    switch (res.statusCode) {\n      case 405:\n        return end(ethErrors.rpc.methodNotFound())\n      case 504: // Gateway timeout\n        return (function(){\n          let msg = `Gateway timeout. The request took too long to process. `\n          msg += `This can happen when querying logs over too wide a block range.`\n          const err = new Error(msg)\n          return end(serializeError(err))\n        })()\n      case 429: // Too many requests (rate limiting)\n        return (function(){\n          const err = new Error(`Too Many Requests`)\n          return end(serializeError(err))\n        })()\n      default:\n        if (res.statusCode != 200) {\n          const msg = 'Unknown Error: ' + res.body\n          const err = new Error(msg)\n          return end(serializeError(err))\n        }\n    }\n\n    // parse response\n    let data\n    try {\n      data = JSON.parse(body)\n    } catch (err) {\n      console.error(err.stack)\n      return end(serializeError(err))\n    }\n    if (data.error) return end(data.error)\n\n    end(null, data.result)\n  })\n}\n\n// drops any non-standard params\nfunction sanitizePayload (payload) {\n  return {\n    id: payload.id,\n    jsonrpc: payload.jsonrpc,\n    method: payload.method,\n    params: payload.params,\n  }\n}","\nconst { EthereumRpcError, EthereumProviderError } = require('./src/classes')\nconst {\n  serializeError, getMessageFromCode,\n} = require('./src/utils')\nconst ethErrors = require('./src/errors')\nconst ERROR_CODES = require('./src/errorCodes.json')\n\nmodule.exports = {\n  ethErrors,\n  EthereumRpcError,\n  EthereumProviderError,\n  serializeError,\n  getMessageFromCode,\n  /** @type ErrorCodes */\n  ERROR_CODES,\n}\n\n// Types\n\n/**\n * @typedef {Object} EthereumProviderErrorCodes\n * @property {number} userRejectedRequest\n * @property {number} unauthorized\n * @property {number} unsupportedMethod\n */\n\n/**\n * @typedef {Object} EthereumRpcErrorCodes\n * @property {number} parse\n * @property {number} invalidRequest\n * @property {number} invalidParams\n * @property {number} methodNotFound\n * @property {number} internal\n * @property {number} invalidInput\n * @property {number} resourceNotFound\n * @property {number} resourceUnavailable\n * @property {number} transactionRejected\n * @property {number} methodNotSupported\n */\n\n/**\n * @typedef ErrorCodes\n * @property {EthereumRpcErrorCodes} rpc\n * @property {EthereumProviderErrorCodes} provider\n */\n","\nconst { EthereumRpcError, EthereumProviderError } = require('./classes')\nconst { getMessageFromCode } = require('./utils')\nconst ERROR_CODES = require('./errorCodes.json')\n\nmodule.exports = {\n  rpc: {\n    /**\n     * Get a JSON RPC 2.0 Parse (-32700) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    parse: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.parse, opts\n    ),\n\n    /**\n     * Get a JSON RPC 2.0 Invalid Request (-32600) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    invalidRequest: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.invalidRequest, opts\n    ),\n\n    /**\n     * Get a JSON RPC 2.0 Invalid Params (-32602) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    invalidParams: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.invalidParams, opts\n    ),\n\n    /**\n     * Get a JSON RPC 2.0 Method Not Found (-32601) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    methodNotFound: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.methodNotFound, opts\n    ),\n\n    /**\n     * Get a JSON RPC 2.0 Internal (-32603) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    internal: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.internal, opts\n    ),\n\n    /**\n     * Get a JSON RPC 2.0 Server error.\n     * Permits integer error codes in the [ -32099 <= -32005 ] range.\n     * Codes -32000 through -32004 are reserved by EIP 1474.\n     * \n     * @param {Object|string} opts - Options object\n     * @param {number} opts.code - The error code\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    server: (opts) => {\n      if (!opts || typeof opts !== 'object' || Array.isArray(opts)) {\n        throw new Error('Ethereum RPC Server errors must provide single object argument.')\n      }\n      const { code } = opts\n      if (!Number.isInteger(code) || code > -32005 || code < -32099) {\n        throw new Error(\n          '\"code\" must be an integer such that: -32099 <= code <= -32005'\n        )\n      }\n      return getEthJsonRpcError(code, opts)\n    },\n\n    /**\n     * Get an Ethereum JSON RPC Invalid Input (-32000) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    invalidInput: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.invalidInput, opts\n    ),\n\n    /**\n     * Get an Ethereum JSON RPC Resource Not Found (-32001) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    resourceNotFound: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.resourceNotFound, opts\n    ),\n\n    /**\n     * Get an Ethereum JSON RPC Resource Unavailable (-32002) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    resourceUnavailable: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.resourceUnavailable, opts\n    ),\n\n    /**\n     * Get an Ethereum JSON RPC Transaction Rejected (-32003) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    transactionRejected: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.transactionRejected, opts\n    ),\n\n    /**\n     * Get an Ethereum JSON RPC Method Not Supported (-32004) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    methodNotSupported: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.methodNotSupported, opts\n    ),\n  },\n\n  provider: {\n    /**\n     * Get an Ethereum Provider User Rejected Request (4001) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumProviderError} The error\n     */\n    userRejectedRequest: (opts) => {\n      return getEthProviderError(\n        ERROR_CODES.provider.userRejectedRequest, opts\n      )\n    },\n\n    /**\n     * Get an Ethereum Provider Unauthorized (4100) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumProviderError} The error\n     */\n    unauthorized: (opts) => {\n      return getEthProviderError(\n        ERROR_CODES.provider.unauthorized, opts\n      )\n    },\n\n    /**\n     * Get an Ethereum Provider Unsupported Method (4200) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumProviderError} The error\n     */\n    unsupportedMethod: (opts) => {\n      return getEthProviderError(\n        ERROR_CODES.provider.unsupportedMethod, opts\n      )\n    },\n\n    /**\n     * Get a custom Ethereum Provider error.\n     * \n     * @param {Object|string} opts - Options object\n     * @param {number} opts.code - The error code\n     * @param {string} opts.message - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumProviderError} The error\n     */\n    custom: (opts) => {\n      if (!opts || typeof opts !== 'object' || Array.isArray(opts)) {\n        throw new Error('Ethereum Provider custom errors must provide single object argument.')\n      }\n      const { code, message, data } = opts\n      if (!message || typeof message !== 'string') throw new Error(\n        '\"message\" must be a nonempty string'\n      )\n      return new EthereumProviderError(code, message, data)\n    },\n  },\n}\n\n// Internal\n\nfunction getEthJsonRpcError(code, opts) {\n  const [ message, data ] = validateOpts(opts)\n  return new EthereumRpcError(\n    code,\n    message || getMessageFromCode(code),\n    data\n  )\n}\n\nfunction getEthProviderError(code, opts) {\n  const [ message, data ] = validateOpts(opts)\n  return new EthereumProviderError(\n    code,\n    message || getMessageFromCode(code),\n    data\n  )\n}\n\nfunction validateOpts (opts) {\n  let message, data\n  if (opts) {\n    if (typeof opts === 'string') {\n      message = opts\n    } else if (typeof opts === 'object' && !Array.isArray(opts)) {\n      message = opts.message\n      data = opts.data\n    }\n  }\n  return [ message, data ]\n}\n","/*\n * Emulate 'eth_accounts' / 'eth_sendTransaction' using 'eth_sendRawTransaction'\n *\n * The two callbacks a user needs to implement are:\n * - getAccounts() -- array of addresses supported\n * - signTransaction(tx) -- sign a raw transaction object\n */\n\nconst waterfall = require('async/waterfall')\nconst parallel = require('async/parallel')\nconst inherits = require('util').inherits\nconst ethUtil = require('ethereumjs-util')\nconst sigUtil = require('eth-sig-util')\nconst extend = require('xtend')\nconst Semaphore = require('semaphore')\nconst Subprovider = require('./subprovider.js')\nconst estimateGas = require('../util/estimate-gas.js')\nconst hexRegex = /^[0-9A-Fa-f]+$/g\n\nmodule.exports = HookedWalletSubprovider\n\n// handles the following RPC methods:\n//   eth_coinbase\n//   eth_accounts\n//   eth_sendTransaction\n//   eth_sign\n//   eth_signTypedData\n//   eth_signTypedData_v3\n//   eth_signTypedData_v4\n//   personal_sign\n//   eth_decryptMessage\n//   encryption_public_key\n//   personal_ecRecover\n//   parity_postTransaction\n//   parity_checkRequest\n//   parity_defaultAccount\n\n//\n// Tx Signature Flow\n//\n// handleRequest: eth_sendTransaction\n//   validateTransaction (basic validity check)\n//     validateSender (checks that sender is in accounts)\n//   processTransaction (sign tx and submit to network)\n//     approveTransaction (UI approval hook)\n//     checkApproval\n//     finalizeAndSubmitTx (tx signing)\n//       nonceLock.take (bottle neck to ensure atomic nonce)\n//         fillInTxExtras (set fallback gasPrice, nonce, etc)\n//         signTransaction (perform the signature)\n//         publishTransaction (publish signed tx to network)\n//\n\n\ninherits(HookedWalletSubprovider, Subprovider)\n\nfunction HookedWalletSubprovider(opts){\n  const self = this\n  // control flow\n  self.nonceLock = Semaphore(1)\n\n  // data lookup\n  if (opts.getAccounts) self.getAccounts = opts.getAccounts\n  // high level override\n  if (opts.processTransaction) self.processTransaction = opts.processTransaction\n  if (opts.processMessage) self.processMessage = opts.processMessage\n  if (opts.processPersonalMessage) self.processPersonalMessage = opts.processPersonalMessage\n  if (opts.processTypedMessage) self.processTypedMessage = opts.processTypedMessage\n  // approval hooks\n  self.approveTransaction = opts.approveTransaction || self.autoApprove\n  self.approveMessage = opts.approveMessage || self.autoApprove\n  self.approvePersonalMessage = opts.approvePersonalMessage || self.autoApprove\n  self.approveDecryptMessage = opts.approveDecryptMessage || self.autoApprove\n  self.approveEncryptionPublicKey = opts.approveEncryptionPublicKey || self.autoApprove\n  self.approveTypedMessage = opts.approveTypedMessage || self.autoApprove\n  // actually perform the signature\n  if (opts.signTransaction) self.signTransaction = opts.signTransaction  || mustProvideInConstructor('signTransaction')\n  if (opts.signMessage) self.signMessage = opts.signMessage  || mustProvideInConstructor('signMessage')\n  if (opts.signPersonalMessage) self.signPersonalMessage = opts.signPersonalMessage  || mustProvideInConstructor('signPersonalMessage')\n  if (opts.decryptMessage) self.decryptMessage = opts.decryptMessage  || mustProvideInConstructor('decryptMessage')\n  if (opts.encryptionPublicKey) self.encryptionPublicKey = opts.encryptionPublicKey  || mustProvideInConstructor('encryptionPublicKey')\n  if (opts.signTypedMessage) self.signTypedMessage = opts.signTypedMessage  || mustProvideInConstructor('signTypedMessage')\n  if (opts.recoverPersonalSignature) self.recoverPersonalSignature = opts.recoverPersonalSignature\n  // publish to network\n  if (opts.publishTransaction) self.publishTransaction = opts.publishTransaction\n  // gas options\n  self.estimateGas = opts.estimateGas || self.estimateGas\n  self.getGasPrice = opts.getGasPrice || self.getGasPrice\n}\n\nHookedWalletSubprovider.prototype.handleRequest = function(payload, next, end){\n  const self = this\n  self._parityRequests = {}\n  self._parityRequestCount = 0\n\n  // switch statement is not block scoped\n  // sp we cant repeat var declarations\n  let txParams, msgParams, extraParams\n  let message, address\n\n  switch(payload.method) {\n\n    case 'eth_coinbase':\n      // process normally\n      self.getAccounts(function(err, accounts){\n        if (err) return end(err)\n        let result = accounts[0] || null\n        end(null, result)\n      })\n      return\n\n    case 'eth_accounts':\n      // process normally\n      self.getAccounts(function(err, accounts){\n        if (err) return end(err)\n        end(null, accounts)\n      })\n      return\n\n    case 'eth_sendTransaction':\n      txParams = payload.params[0]\n      waterfall([\n        (cb) => self.validateTransaction(txParams, cb),\n        (cb) => self.processTransaction(txParams, cb),\n      ], end)\n      return\n\n    case 'eth_signTransaction':\n      txParams = payload.params[0]\n      waterfall([\n        (cb) => self.validateTransaction(txParams, cb),\n        (cb) => self.processSignTransaction(txParams, cb),\n      ], end)\n      return\n\n    case 'eth_sign':\n      // process normally\n      address = payload.params[0]\n      message = payload.params[1]\n      // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n      // good place for metadata\n      extraParams = payload.params[2] || {}\n      msgParams = extend(extraParams, {\n        from: address,\n        data: message,\n      })\n      waterfall([\n        (cb) => self.validateMessage(msgParams, cb),\n        (cb) => self.processMessage(msgParams, cb),\n      ], end)\n      return\n\n    case 'personal_sign':\n      return (function(){\n        // process normally\n        const first = payload.params[0]\n        const second = payload.params[1]\n\n        // We initially incorrectly ordered these parameters.\n        // To gracefully respect users who adopted this API early,\n        // we are currently gracefully recovering from the wrong param order\n        // when it is clearly identifiable.\n        //\n        // That means when the first param is definitely an address,\n        // and the second param is definitely not, but is hex.\n        if (resemblesData(second) && resemblesAddress(first)) {\n          let warning = `The eth_personalSign method requires params ordered `\n          warning += `[message, address]. This was previously handled incorrectly, `\n          warning += `and has been corrected automatically. `\n          warning += `Please switch this param order for smooth behavior in the future.`\n          console.warn(warning)\n\n          address = payload.params[0]\n          message = payload.params[1]\n        } else {\n          message = payload.params[0]\n          address = payload.params[1]\n        }\n\n        // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n        // good place for metadata\n        extraParams = payload.params[2] || {}\n        msgParams = extend(extraParams, {\n          from: address,\n          data: message,\n        })\n        waterfall([\n          (cb) => self.validatePersonalMessage(msgParams, cb),\n          (cb) => self.processPersonalMessage(msgParams, cb),\n        ], end)\n      })()\n\n    case 'eth_decryptMessage':\n      return (function(){\n        // process normally\n        const first = payload.params[0]\n        const second = payload.params[1]\n\n        // We initially incorrectly ordered these parameters.\n        // To gracefully respect users who adopted this API early,\n        // we are currently gracefully recovering from the wrong param order\n        // when it is clearly identifiable.\n        //\n        // That means when the first param is definitely an address,\n        // and the second param is definitely not, but is hex.\n        if (resemblesData(second) && resemblesAddress(first)) {\n          let warning = `The eth_decryptMessage method requires params ordered `\n          warning += `[message, address]. This was previously handled incorrectly, `\n          warning += `and has been corrected automatically. `\n          warning += `Please switch this param order for smooth behavior in the future.`\n          console.warn(warning)\n\n          address = payload.params[0]\n          message = payload.params[1]\n        } else {\n          message = payload.params[0]\n          address = payload.params[1]\n        }\n\n        // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n        // good place for metadata\n        extraParams = payload.params[2] || {}\n        msgParams = extend(extraParams, {\n          from: address,\n          data: message,\n        })\n        waterfall([\n          (cb) => self.validateDecryptMessage(msgParams, cb),\n          (cb) => self.processDecryptMessage(msgParams, cb),\n        ], end)\n      })()\n      \n    case 'encryption_public_key':\n      return (function(){\n        const address = payload.params[0]\n        \n        waterfall([\n          (cb) => self.validateEncryptionPublicKey(address, cb),\n          (cb) => self.processEncryptionPublicKey(address, cb),\n        ], end)\n      })()\n      \n    case 'personal_ecRecover':\n      return (function(){    \n        message = payload.params[0]\n        let signature = payload.params[1]\n        // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n        // good place for metadata\n        extraParams = payload.params[2] || {}\n        msgParams = extend(extraParams, {\n          sig: signature,\n          data: message,\n        })\n        self.recoverPersonalSignature(msgParams, end)\n      })()\n\n    case 'eth_signTypedData':\n    case 'eth_signTypedData_v3':\n    case 'eth_signTypedData_v4':\n      return (function(){ \n        // process normally\n      \n        const first = payload.params[0]\n        const second = payload.params[1]\n\n        if (resemblesAddress(first)) {\n          address = first\n          message = second\n        } else {\n          message = first\n          address = second\n        }\n\n        extraParams = payload.params[2] || {}\n        msgParams = extend(extraParams, {\n          from: address,\n          data: message,\n        })\n        waterfall([\n          (cb) => self.validateTypedMessage(msgParams, cb),\n          (cb) => self.processTypedMessage(msgParams, cb),\n        ], end)\n      })()\n\n    case 'parity_postTransaction':\n      txParams = payload.params[0]\n      self.parityPostTransaction(txParams, end)\n      return\n\n    case 'parity_postSign':\n      address = payload.params[0]\n      message = payload.params[1]\n      self.parityPostSign(address, message, end)\n      return\n\n    case 'parity_checkRequest':\n      return (function(){\n        const requestId = payload.params[0]\n        self.parityCheckRequest(requestId, end)\n      })()\n\n    case 'parity_defaultAccount':\n      self.getAccounts(function(err, accounts){\n        if (err) return end(err)\n        const account = accounts[0] || null\n        end(null, account)\n      })\n      return\n\n    default:\n      next()\n      return\n\n  }\n}\n\n//\n// data lookup\n//\n\nHookedWalletSubprovider.prototype.getAccounts = function(cb) {\n  cb(null, [])\n}\n\n\n//\n// \"process\" high level flow\n//\n\nHookedWalletSubprovider.prototype.processTransaction = function(txParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approveTransaction(txParams, cb),\n    (didApprove, cb) => self.checkApproval('transaction', didApprove, cb),\n    (cb) => self.finalizeAndSubmitTx(txParams, cb),\n  ], cb)\n}\n\n\nHookedWalletSubprovider.prototype.processSignTransaction = function(txParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approveTransaction(txParams, cb),\n    (didApprove, cb) => self.checkApproval('transaction', didApprove, cb),\n    (cb) => self.finalizeTx(txParams, cb),\n  ], cb)\n}\n\nHookedWalletSubprovider.prototype.processMessage = function(msgParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approveMessage(msgParams, cb),\n    (didApprove, cb) => self.checkApproval('message', didApprove, cb),\n    (cb) => self.signMessage(msgParams, cb),\n  ], cb)\n}\n\nHookedWalletSubprovider.prototype.processPersonalMessage = function(msgParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approvePersonalMessage(msgParams, cb),\n    (didApprove, cb) => self.checkApproval('message', didApprove, cb),\n    (cb) => self.signPersonalMessage(msgParams, cb),\n  ], cb)\n}\n\nHookedWalletSubprovider.prototype.processDecryptMessage = function(msgParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approveDecryptMessage(msgParams, cb),\n    (didApprove, cb) => self.checkApproval('decryptMessage', didApprove, cb),\n    (cb) => self.decryptMessage(msgParams, cb),\n  ], cb)\n}\n\nHookedWalletSubprovider.prototype.processEncryptionPublicKey = function(msgParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approveEncryptionPublicKey(msgParams, cb),\n    (didApprove, cb) => self.checkApproval('encryptionPublicKey', didApprove, cb),\n    (cb) => self.encryptionPublicKey(msgParams, cb),\n  ], cb)\n}\n\nHookedWalletSubprovider.prototype.processTypedMessage = function(msgParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approveTypedMessage(msgParams, cb),\n    (didApprove, cb) => self.checkApproval('message', didApprove, cb),\n    (cb) => self.signTypedMessage(msgParams, cb),\n  ], cb)\n}\n\n//\n// approval\n//\n\nHookedWalletSubprovider.prototype.autoApprove = function(txParams, cb) {\n  cb(null, true)\n}\n\nHookedWalletSubprovider.prototype.checkApproval = function(type, didApprove, cb) {\n  cb( didApprove ? null : new Error('User denied '+type+' signature.') )\n}\n\n//\n// parity\n//\n\nHookedWalletSubprovider.prototype.parityPostTransaction = function(txParams, cb) {\n  const self = this\n\n  // get next id\n  const count = self._parityRequestCount\n  const reqId = `0x${count.toString(16)}`\n  self._parityRequestCount++\n\n  self.emitPayload({\n    method: 'eth_sendTransaction',\n    params: [txParams],\n  }, function(error, res){\n    if (error) {\n      self._parityRequests[reqId] = { error }\n      return\n    }\n    const txHash = res.result\n    self._parityRequests[reqId] = txHash\n  })\n\n  cb(null, reqId)\n}\n\n\nHookedWalletSubprovider.prototype.parityPostSign = function(address, message, cb) {\n  const self = this\n\n  // get next id\n  const count = self._parityRequestCount\n  const reqId = `0x${count.toString(16)}`\n  self._parityRequestCount++\n\n  self.emitPayload({\n    method: 'eth_sign',\n    params: [address, message],\n  }, function(error, res){\n    if (error) {\n      self._parityRequests[reqId] = { error }\n      return\n    }\n    const result = res.result\n    self._parityRequests[reqId] = result\n  })\n\n  cb(null, reqId)\n}\n\nHookedWalletSubprovider.prototype.parityCheckRequest = function(reqId, cb) {\n  const self = this\n  const result = self._parityRequests[reqId] || null\n  // tx not handled yet\n  if (!result) return cb(null, null)\n  // tx was rejected (or other error)\n  if (result.error) return cb(result.error)\n  // tx sent\n  cb(null, result)\n}\n\n//\n// signature and recovery\n//\n\nHookedWalletSubprovider.prototype.recoverPersonalSignature = function(msgParams, cb) {\n  let senderHex\n  try {\n    senderHex = sigUtil.recoverPersonalSignature(msgParams)\n  } catch (err) {\n    return cb(err)\n  }\n  cb(null, senderHex)\n}\n\n//\n// validation\n//\n\nHookedWalletSubprovider.prototype.validateTransaction = function(txParams, cb){\n  const self = this\n  // shortcut: undefined sender is invalid\n  if (txParams.from === undefined) return cb(new Error(`Undefined address - from address required to sign transaction.`))\n  self.validateSender(txParams.from, function(err, senderIsValid){\n    if (err) return cb(err)\n    if (!senderIsValid) return cb(new Error(`Unknown address - unable to sign transaction for this address: \"${txParams.from}\"`))\n    cb()\n  })\n}\n\nHookedWalletSubprovider.prototype.validateMessage = function(msgParams, cb){\n  const self = this\n  if (msgParams.from === undefined) return cb(new Error(`Undefined address - from address required to sign message.`))\n  self.validateSender(msgParams.from, function(err, senderIsValid){\n    if (err) return cb(err)\n    if (!senderIsValid) return cb(new Error(`Unknown address - unable to sign message for this address: \"${msgParams.from}\"`))\n    cb()\n  })\n}\n\nHookedWalletSubprovider.prototype.validatePersonalMessage = function(msgParams, cb){\n  const self = this\n  if (msgParams.from === undefined) return cb(new Error(`Undefined address - from address required to sign personal message.`))\n  if (msgParams.data === undefined) return cb(new Error(`Undefined message - message required to sign personal message.`))\n  if (!isValidHex(msgParams.data)) return cb(new Error(`HookedWalletSubprovider - validateMessage - message was not encoded as hex.`))\n  self.validateSender(msgParams.from, function(err, senderIsValid){\n    if (err) return cb(err)\n    if (!senderIsValid) return cb(new Error(`Unknown address - unable to sign message for this address: \"${msgParams.from}\"`))\n    cb()\n  })\n}\n\nHookedWalletSubprovider.prototype.validateDecryptMessage = function(msgParams, cb){\n  const self = this\n  if (msgParams.from === undefined) return cb(new Error(`Undefined address - from address required to decrypt message.`))\n  if (msgParams.data === undefined) return cb(new Error(`Undefined message - message required to decrypt message.`))\n  if (!isValidHex(msgParams.data)) return cb(new Error(`HookedWalletSubprovider - validateDecryptMessage - message was not encoded as hex.`))\n  self.validateSender(msgParams.from, function(err, senderIsValid){\n    if (err) return cb(err)\n    if (!senderIsValid) return cb(new Error(`Unknown address - unable to decrypt message for this address: \"${msgParams.from}\"`))\n    cb()\n  })\n}\n\nHookedWalletSubprovider.prototype.validateEncryptionPublicKey = function(address, cb){\n  const self = this\n\n  self.validateSender(address, function(err, senderIsValid){\n    if (err) return cb(err)\n    if (!senderIsValid) return cb(new Error(`Unknown address - unable to obtain encryption public key for this address: \"${address}\"`))\n    cb()\n  })\n}\n\nHookedWalletSubprovider.prototype.validateTypedMessage = function(msgParams, cb){\n  if (msgParams.from === undefined) return cb(new Error(`Undefined address - from address required to sign typed data.`))\n  if (msgParams.data === undefined) return cb(new Error(`Undefined data - message required to sign typed data.`))\n  this.validateSender(msgParams.from, function(err, senderIsValid){\n    if (err) return cb(err)\n    if (!senderIsValid) return cb(new Error(`Unknown address - unable to sign message for this address: \"${msgParams.from}\"`))\n    cb()\n  })\n}\n\nHookedWalletSubprovider.prototype.validateSender = function(senderAddress, cb){\n  const self = this\n  // shortcut: undefined sender is invalid\n  if (!senderAddress) return cb(null, false)\n  self.getAccounts(function(err, accounts){\n    if (err) return cb(err)\n    const senderIsValid = (accounts.map(toLowerCase).indexOf(senderAddress.toLowerCase()) !== -1)\n    cb(null, senderIsValid)\n  })\n}\n\n//\n// tx helpers\n//\n\nHookedWalletSubprovider.prototype.finalizeAndSubmitTx = function(txParams, cb) {\n  const self = this\n  // can only allow one tx to pass through this flow at a time\n  // so we can atomically consume a nonce\n  self.nonceLock.take(function(){\n    waterfall([\n      self.fillInTxExtras.bind(self, txParams),\n      self.signTransaction.bind(self),\n      self.publishTransaction.bind(self),\n    ], function(err, txHash){\n      self.nonceLock.leave()\n      if (err) return cb(err)\n      cb(null, txHash)\n    })\n  })\n}\n\nHookedWalletSubprovider.prototype.finalizeTx = function(txParams, cb) {\n  const self = this\n  // can only allow one tx to pass through this flow at a time\n  // so we can atomically consume a nonce\n  self.nonceLock.take(function(){\n    waterfall([\n      self.fillInTxExtras.bind(self, txParams),\n      self.signTransaction.bind(self),\n    ], function(err, signedTx){\n      self.nonceLock.leave()\n      if (err) return cb(err)\n      cb(null, {raw: signedTx, tx: txParams})\n    })\n  })\n}\n\nHookedWalletSubprovider.prototype.publishTransaction = function(rawTx, cb) {\n  const self = this\n  self.emitPayload({\n    method: 'eth_sendRawTransaction',\n    params: [rawTx],\n  }, function(err, res){\n    if (err) return cb(err)\n    cb(null, res.result)\n  })\n}\n\nHookedWalletSubprovider.prototype.estimateGas = function(txParams, cb) {\n  const self = this\n  estimateGas(self.engine, txParams, cb)\n}\n\nHookedWalletSubprovider.prototype.getGasPrice = function(cb) {\n  const self = this\n  self.emitPayload({ method: 'eth_gasPrice', params: [] }, function (err, res) {\n    if (err) return cb(err)\n    cb(null, res.result)\n  })\n}\n\nHookedWalletSubprovider.prototype.fillInTxExtras = function(txParams, cb){\n  const self = this\n  const address = txParams.from\n  // console.log('fillInTxExtras - address:', address)\n\n  const tasks = {}\n\n  if (txParams.gasPrice === undefined) {\n    // console.log(\"need to get gasprice\")\n    tasks.gasPrice = self.getGasPrice.bind(self)\n  }\n\n  if (txParams.nonce === undefined) {\n    // console.log(\"need to get nonce\")\n    tasks.nonce = self.emitPayload.bind(self, { method: 'eth_getTransactionCount', params: [address, 'pending'] })\n  }\n\n  if (txParams.gas === undefined) {\n    // console.log(\"need to get gas\")\n    tasks.gas = self.estimateGas.bind(self, cloneTxParams(txParams))\n  }\n\n  parallel(tasks, function(err, taskResults) {\n    if (err) return cb(err)\n\n    const result = {}\n    if (taskResults.gasPrice) result.gasPrice = taskResults.gasPrice\n    if (taskResults.nonce) result.nonce = taskResults.nonce.result\n    if (taskResults.gas) result.gas = taskResults.gas\n\n    cb(null, extend(txParams, result))\n  })\n}\n\n// util\n\n// we use this to clean any custom params from the txParams\nfunction cloneTxParams(txParams){\n  return {\n    from: txParams.from,\n    to: txParams.to,\n    value: txParams.value,\n    data: txParams.data,\n    gas: txParams.gas,\n    gasPrice: txParams.gasPrice,\n    nonce: txParams.nonce,\n  }\n}\n\nfunction toLowerCase(string){\n  return string.toLowerCase()\n}\n\nfunction resemblesAddress (string) {\n  const fixed = ethUtil.addHexPrefix(string)\n  const isValid = ethUtil.isValidAddress(fixed)\n  return isValid\n}\n\n// Returns true if resembles hex data\n// but definitely not a valid address.\nfunction resemblesData (string) {\n  const fixed = ethUtil.addHexPrefix(string)\n  const isValidAddress = ethUtil.isValidAddress(fixed)\n  return !isValidAddress && isValidHex(string)\n}\n\nfunction isValidHex(data) {\n  const isString = typeof data === 'string'\n  if (!isString) return false\n  const isHexPrefixed = data.slice(0,2) === '0x'\n  if (!isHexPrefixed) return false\n  const nonPrefixed = data.slice(2)\n  const isValid = nonPrefixed.match(hexRegex)\n  return isValid\n}\n\nfunction mustProvideInConstructor(methodName) {\n  return function(params, cb) {\n    cb(new Error('ProviderEngine - HookedWalletSubprovider - Must provide \"' + methodName + '\" fn in constructor options'))\n  }\n}\n","const createPayload = require('./create-payload.js')\n\nmodule.exports = estimateGas\n\n/*\n\nThis is a work around for https://github.com/ethereum/go-ethereum/issues/2577\n\n*/\n\n\nfunction estimateGas(provider, txParams, cb) {\n  provider.sendAsync(createPayload({\n    method: 'eth_estimateGas',\n    params: [txParams]\n  }), function(err, res){\n    if (err) {\n      // handle simple value transfer case\n      if (err.message === 'no contract code at given address') {\n        return cb(null, '0xcf08')\n      } else {\n        return cb(err)        \n      }\n    }\n    cb(null, res.result)\n  })\n}","const ProviderSubprovider = require('./json-rpc-engine-middleware')\nconst createSubscriptionManager = require('eth-json-rpc-filters/subscriptionManager')\n\nclass SubscriptionsSubprovider extends ProviderSubprovider {\n  constructor() {\n    super(({ blockTracker, provider, engine }) => {\n      const { events, middleware } = createSubscriptionManager({ blockTracker, provider })\n      // forward subscription events on the engine\n      events.on('notification', (data) => engine.emit('data', null, data))\n      // return the subscription install/remove middleware\n      return middleware\n    })\n  }\n}\n\nmodule.exports = SubscriptionsSubprovider\n","const ProviderSubprovider = require('./json-rpc-engine-middleware')\nconst createFilterMiddleware = require('eth-json-rpc-filters')\n\nclass SubscriptionsSubprovider extends ProviderSubprovider {\n  constructor() {\n    super(({ blockTracker, provider, engine }) => {\n      return createFilterMiddleware({ blockTracker, provider })\n    })\n  }\n}\n\nmodule.exports = SubscriptionsSubprovider\n"],"sourceRoot":""}