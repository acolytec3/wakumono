(this.webpackJsonpwakumono=this.webpackJsonpwakumono||[]).push([[9],{1045:function(e,t){},1052:function(e,t){},1054:function(e,t){},1064:function(e,t){},1066:function(e,t){},1104:function(e,t){},1106:function(e,t){},1113:function(e,t){},1114:function(e,t){},1133:function(e,t){},1170:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(185),s=n.n(c),o=(n(587),n(542));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(39);s.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(o.a,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},188:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o}));var r=n(21),a=n(1),c={addressBook:{}},s=function(e,t){switch(t.type){case"SET_WEB3":return Object(r.a)(Object(r.a)({},e),{},{web3:t.payload.web3});case"START_WAKU":return Object(r.a)(Object(r.a)({},e),{},{waku:t.payload.waku});case"SET_ADDRESS":return Object(r.a)(Object(r.a)({},e),{},{address:t.payload.address});case"SET_ONBOARD":return Object(r.a)(Object(r.a)({},e),{},{onboard:t.payload.onboard});case"SET_KEYS":return Object(r.a)(Object(r.a)({},e),{},{keys:t.payload.keys});case"ADD_PEER":return Object(r.a)(Object(r.a)({},e),{},{addressBook:Object.assign(e.addressBook,t.payload)});default:return e}},o=n.n(a).a.createContext({state:c,dispatch:function(){return null}})},257:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n(0),a=n.n(r),c=n(28),s=n(160),o=function(e){return e.substring(0,4)+"..."+e.substring(e.length-4)},i=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r){var c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),c={message:n,signature:r},e.next=4,s.a.encryptWithPublicKey(t,JSON.stringify(c));case 4:return o=e.sent,e.abrupt("return",s.a.cipher.stringify(o));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},295:function(e,t){},542:function(e,t,n){"use strict";(function(e){var r,a=n(0),c=n.n(a),s=n(26),o=n(28),i=n(18),u=n(1177),d=n(1178),l=n(1176),p=n(276),f=n(566),b=n(194),j=n(567),h=n(543),v=n(216),y=n(192),O=n(1),w=n.n(O),g=n(551),x=n(188),k=n(257),m=n(160),S=n(39),E="dingus";t.a=function(){var t=w.a.useReducer(x.c,x.b),n=Object(i.a)(t,2),a=n[0],O=n[1],A=w.a.useState(""),C=Object(i.a)(A,2),T=C[0],B=C[1],W=w.a.useState(""),_=Object(i.a)(W,2),D=_[0],K=_[1],R=Object(u.a)(),N=function(){var e=Object(o.a)(c.a.mark((function e(t){var n,r,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=JSON.parse(t.payloadAsUtf8),console.log(n),n.chatKey&&O({type:"ADD_PEER",payload:Object(s.a)({},n.address.toLowerCase(),n.chatKey)}),e.next=21;break;case 6:if(e.prev=6,e.t0=e.catch(0),!t.payload||!a.keys){e.next=21;break}return e.prev=9,e.next=12,m.a.decryptWithPrivateKey(a.keys.privateKey,m.a.cipher.parse(t.payloadAsUtf8));case 12:r=e.sent,o=JSON.parse(r),i=v.a.utils.verifyMessage(o.message,o.signature),console.log("Got a secret message: ".concat(o.message," from ").concat(i)),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(9),console.log(e.t1);case 21:case"end":return e.stop()}}),e,null,[[0,6],[9,18]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(o.a)(c.a.mark((function e(t,n){var r,s,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.web3){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a.web3.getSigner().signMessage(n);case 4:return s=e.sent,e.next=7,Object(k.a)(a.addressBook[t.toLowerCase()],n,s);case 7:o=e.sent,i=y.c.fromUtf8String(o,E),null===(r=a.waku)||void 0===r||r.relay.send(i);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),U=function(){var e=Object(o.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.peerId,!n.protocols.includes(y.a)){e.next=12;break}return e.prev=2,e.next=5,t.store.queryHistory({peerId:r,contentTopics:[E]});case 5:(a=e.sent)&&a.map((function(e){return N(e)})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("".concat(r.toB58String(),": error encountered when retrieving archived messages"),e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(o.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.b.create({config:{pubsub:{enabled:!0,emitSelf:!0}}});case 3:return(t=e.sent).addPeerToAddressBook("16Uiu2HAmPLe7Mzm8TsYUubgCAW1aJoeFScxrLj8ppHFivPo97bUZ",["/dns4/node-01.do-ams3.jdev.misc.statusim.net/tcp/7010/wss"]),e.next=7,Object(y.d)();case 7:return n=e.sent,e.next=10,Promise.all(n.map((function(e){return t.dial(e)})));case 10:O({type:"START_WAKU",payload:{waku:t}}),t.relay.addObserver(N,[E]),t.libp2p.peerStore.on("change:protocols",U.bind({},t)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("Issue starting waku ",e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();w.a.useEffect((function(){return function(){var e;null===(e=a.waku)||void 0===e||e.libp2p.peerStore.removeListener("change:protocols",U.bind({},a.waku))}}),[]);var I=Object(h.a)({networkId:1,subscriptions:{wallet:function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{window.ethereum&&window.ethereum.enable(),r=new v.a.providers.Web3Provider(t.provider),O({type:"SET_WEB3",payload:{web3:r}}),J()}catch(n){console.log(n),R({position:"top",status:"error",title:"Something went wrong",description:null===n||void 0===n?void 0:n.toString(),duration:5e3})}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),address:function(e){O({type:"SET_ADDRESS",payload:{address:e}})},balance:function(e){O({type:"SET_BALANCE",payload:{balance:e}})},network:function(e){O({type:"SET_CHAIN",payload:{chain:e}})}},walletSelect:{wallets:[{walletName:"metamask",preferred:!0}]}}),J=function(){var t=Object(o.a)(c.a.mark((function t(){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getSigner().signMessage("make it so, Number One");case 2:return n=t.sent,t.next=5,m.a.createIdentity(e.from(n));case 5:a=t.sent,O({type:"SET_KEYS",payload:{keys:a}});case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),L=function(){var e=Object(o.a)(c.a.mark((function e(){var t,n,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.keys){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,r.getSigner().signMessage(a.keys.address);case 4:n=e.sent,s=y.c.fromUtf8String(JSON.stringify({address:a.address,chatKey:a.keys.publicKey,signature:n}),E),null===(t=a.waku)||void 0===t||t.relay.send(s);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O({type:"SET_ONBOARD",payload:{onboard:I}}),e.prev=1,e.next=4,I.walletSelect();case 4:e.sent,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),R({position:"top",status:"error",title:"Something went wrong",description:null===e.t0||void 0===e.t0?void 0:e.t0.toString(),duration:5e3});case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return Object(S.jsx)(d.a,{children:Object(S.jsx)(x.a.Provider,{value:{dispatch:O,state:a},children:Object(S.jsx)(l.a,{h:"90vh",children:Object(S.jsxs)(p.b,{children:[Object(S.jsx)(f.a,{children:"WakuMono"}),Object(S.jsx)(g.a,{handleConnect:H}),Object(S.jsx)(b.a,{onClick:M,children:"Connect to Waku"}),Object(S.jsx)(b.a,{onClick:L,children:"Broadcast ChatKey"}),Object(S.jsxs)(p.a,{children:[Object(S.jsx)(p.b,{children:Object(S.jsx)(j.a,{value:D,placeholder:"Address",onChange:function(e){return K(e.target.value)}})}),Object(S.jsx)(j.a,{value:T,placeholder:"Enter a message",onChange:function(e){return B(e.target.value)}}),Object(S.jsx)(b.a,{onClick:function(){P(D,T)},children:"Send Message"})]})]})})})})}}).call(this,n(14).Buffer)},551:function(e,t,n){"use strict";var r=n(1),a=n.n(r),c=n(1173),s=n(162),o=n(194),i=n(566),u=n(276),d=n(188),l=n(257),p=n(39);t.a=function(e){var t=e.handleConnect,n=a.a.useContext(d.a),r=n.state,f=n.dispatch;return Object(p.jsx)(c.a,{children:r.address?Object(p.jsxs)(s.a,{placement:"top",children:[Object(p.jsx)(s.g,{children:Object(p.jsx)(o.a,{w:"250px",children:Object(l.b)(r.address)})}),Object(p.jsxs)(s.e,{children:[Object(p.jsx)(s.b,{}),Object(p.jsx)(s.d,{}),Object(p.jsx)(s.f,{children:Object(p.jsx)(i.a,{size:"sm",children:"Wallet Details"})}),Object(p.jsx)(s.c,{children:Object(p.jsx)(u.b,{children:Object(p.jsx)(o.a,{onClick:function(){r.onboard&&(r.onboard.walletReset(),f({type:"SET_ADDRESS",payload:{address:void 0}}),f({type:"SET_WEB3",payload:{web3:void 0}}))},children:"Disconnect Wallet"})})})]})]}):Object(p.jsx)(o.a,{w:"250px",onClick:t,children:"Connect Web3"})})}},587:function(e,t,n){},698:function(e,t){},699:function(e,t){},842:function(e,t){},922:function(e,t){},988:function(e,t){}},[[1170,10,11]]]);
//# sourceMappingURL=main.1efde3b2.chunk.js.map